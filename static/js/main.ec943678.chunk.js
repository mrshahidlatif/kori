(this.webpackJsonpvte=this.webpackJsonpvte||[]).push([[0],{172:function(e,t,n){e.exports={panel:"ChartConfigPanel_panel__1OEWt",picker:"ChartConfigPanel_picker__2cC4T",color:"ChartConfigPanel_color__2Pmzu"}},326:function(e,t,n){e.exports={link:"Link_link__jXHvo",potentialLink:"Link_potentialLink__3JiCy"}},327:function(e,t,n){e.exports={container:"ChartGallery_container__pQIvT",draggingArea:"ChartGallery_draggingArea__Wft5P"}},471:function(e){e.exports=JSON.parse('{"$schema":"https://vega.github.io/schema/vega/v5.json","description":"A simple bar chart with embedded data.","background":"white","padding":5,"width":300,"height":200,"style":"cell","data":[{"name":"source_0","values":[{"category":"Apple","amount":28},{"category":"Amazon","amount":55},{"category":"Facebook","amount":43},{"category":"Netflix","amount":91},{"category":"Microsoft","amount":81},{"category":"Samsung","amount":53},{"category":"Twitter","amount":19},{"category":"Linkedin","amount":87}]},{"name":"data_0","source":"source_0","transform":[{"type":"filter","expr":"isValid(datum[\\"amount\\"]) && isFinite(+datum[\\"amount\\"])"}]}],"marks":[{"name":"marks","type":"rect","style":["bar"],"from":{"data":"data_0"},"encode":{"update":{"fill":{"value":"#4c78a8"},"x":{"scale":"x","field":"category"},"width":{"scale":"x","band":1},"y":{"scale":"y","field":"amount"},"y2":{"scale":"y","value":0}}}}],"scales":[{"name":"x","type":"band","domain":{"data":"data_0","field":"category","sort":true},"range":[0,{"signal":"width"}],"paddingInner":0.1,"paddingOuter":0.05},{"name":"y","type":"linear","domain":{"data":"data_0","field":"amount"},"range":[{"signal":"height"},0],"nice":true,"zero":true}],"axes":[{"scale":"y","orient":"left","gridScale":"x","grid":true,"tickCount":{"signal":"ceil(height/40)"},"domain":false,"labels":false,"maxExtent":0,"minExtent":0,"ticks":false,"zindex":0},{"scale":"x","orient":"bottom","grid":false,"title":"category","labelAngle":90,"labelAlign":"left","labelBaseline":"middle","labelOverlap":true,"zindex":0},{"scale":"y","orient":"left","grid":false,"title":"amount","labelOverlap":true,"tickCount":{"signal":"ceil(height/40)"},"zindex":0}]}')},472:function(e){e.exports=JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":300,"height":200,"data":{"values":[{"category":"Apple","amount":28},{"category":"Amazon","amount":55},{"category":"Facebook","amount":43},{"category":"Netflix","amount":91},{"category":"Microsoft","amount":81},{"category":"Samsung","amount":53},{"category":"Twitter","amount":19},{"category":"Linkedin","amount":87}]},"mark":"bar","encoding":{"x":{"field":"category","type":"ordinal","axis":{"labelAngle":90}},"y":{"field":"amount","type":"quantitative"}}}')},474:function(e,t,n){e.exports={viewer:"Viewer_viewer__2m97m"}},482:function(e,t,n){e.exports={textSelection:"HighlightTextSelection_textSelection__2uV3y"}},483:function(e,t,n){e.exports={container:"Chart_container__-PcK5"}},484:function(e,t,n){e.exports={editor:"Editor_editor__2c4G6"}},485:function(e,t,n){e.exports={suggestionPanel:"SuggestionPanel_suggestionPanel__2eTnI"}},487:function(e,t,n){e.exports={potentialLinkControls:"PotentialLinkControls_potentialLinkControls__7i3RY"}},521:function(e,t,n){e.exports=n(923)},526:function(e,t,n){},728:function(e,t){},730:function(e,t){},760:function(e,t){},761:function(e,t){},806:function(e,t){},808:function(e,t){},831:function(e,t){},923:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(1),i=n.n(r),c=n(31),l=n.n(c),o=(n(526),n(62)),u=n(992),d=n(994),s=n(996),f=n(930),g=n(997),h=n(998),m=n(19),v=n(5),p=n(496),b=Object(p.a)("1234567890abcdefghijklmnopqrstuvwxyz",10),E=function(e){return e?e+b():b()},O=n(471),y=n(472),j=n(198),A=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=E("chart-");return{type:"CREATE_CHART",chartId:i,attrs:r=Object(a.a)({docId:e,spec:t,liteSpec:n,timestamp:Date.now(),highlight:{channel:"opacity",active:1,inactive:.1}},r,{id:i})}},x=function(e,t){return{type:"UPDATE_CHART",chartId:e,attrs:t}},S=Object(j.a)((function(e){return e.docs}),(function(e){return e.charts}),(function(e,t){return t}),(function(e,t,n){return e[n].charts.map((function(e){return t[e]}))})),I=Object(j.a)((function(e){return e.docs}),(function(e){return e.charts}),(function(e,t){return t}),(function(e,t,n){return e[n].chartsInEditor.map((function(e){return t[e]}))})),k={testchart:{id:"testchart",docId:"testdoc",timestamp:Date.now(),thumbnail:"data:image/png;base64,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",highlight:{channel:"opacity",active:1,inactive:.1},properties:{axes:[{name:"x",field:"category",data:"data_0",type:"ordinal",title:"category"},{name:"y",field:"amount",data:"data_0",type:"linear",title:"amount"}],features:[{value:"Apple",type:"string",field:"category",data:"data_0"},{value:"Amazon",type:"string",field:"category",data:"data_0"},{value:"Facebook",type:"string",field:"category",data:"data_0"},{value:"Netflix",type:"string",field:"category",data:"data_0"},{value:"Microsoft",type:"string",field:"category",data:"data_0"},{value:"Samsung",type:"string",field:"category",data:"data_0"},{value:"Twitter",type:"string",field:"category",data:"data_0"},{value:"Linkedin",type:"string",field:"category",data:"data_0"}]},spec:O,liteSpec:y}},w=function(e,t){return{type:"UPDATE_DOC",docId:e,attrs:t}},C={testdoc:{id:"testdoc",title:"Testing...",timestamp:Date.now(),charts:["testchart"],chartsInEditor:[],searchedSentences:[],editorRawState:{blocks:[{key:"8i090",text:"Welcome to Vis-Text Editor",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:26,style:"BOLD"}],entityRanges:[],data:{}},{key:"42ncd",text:"Here you can compose interactive articles",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:42,style:"UNDERLINE"}],entityRanges:[],data:{}},{key:"327r6",text:"Start dragging the chart from Chart Gallery to the editor and start creating! ;)",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:81,style:"ITALIC"}],entityRanges:[],data:{}}],entityMap:{}}}},T=Object(u.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(3)},title:{flexGrow:1}}})),D=function(){var e=T(),t=Object(m.c)(),n=Object(m.d)((function(e){return e.ui.currentDocId})),a=Object(m.d)((function(e){return e.docs[n]}));return i.a.createElement(d.a,{className:e.root,position:"static",color:"inherit"},i.a.createElement(s.a,{variant:"dense"},i.a.createElement(g.a,{variant:"h6",className:e.title,underline:"none",color:"inherit",component:o.b,to:"/"},"KORI"),n&&i.a.createElement(h.a,{value:a.title,onChange:function(e){t(w(n,{title:e.target.value}))},size:"small",fullWidth:!0,margin:"dense",variant:"filled",style:{marginLeft:"100px",marginRight:"20px"},label:"Document Title"}),i.a.createElement(f.a,{color:"inherit",component:o.b,to:"/docs"},"Docs"),n&&i.a.createElement(r.Fragment,null,i.a.createElement("span",{style:{marginLeft:"10px",marginRight:"10px"}}," | "),i.a.createElement(f.a,{color:"inherit",component:o.b,to:"/docs/".concat(n)},"Edit"),i.a.createElement(f.a,{color:"inherit",component:o.b,to:"/docs/".concat(n,"/view")},"View"))))},L=n(1001),N=n(204),R=n(1017),M=n(473),F=n.n(M),K=n(1e3);var _=function(){return i.a.createElement(K.a,{container:!0,spacing:3,justify:"center"},i.a.createElement(K.a,{item:!0,xs:6},i.a.createElement(N.a,{variant:"h2",gutterBottom:!0},"KORI"),i.a.createElement(R.a,{marginBottom:2},i.a.createElement(N.a,{variant:"body1",gutterBottom:!0},"Abstract")),i.a.createElement(L.a,{variant:"extended",color:"primary","aria-label":"add",component:o.b,to:"/docs"},i.a.createElement(F.a,null),"Get Started")),i.a.createElement(K.a,{item:!0,xs:6},i.a.createElement(N.a,{variant:"overline",display:"block",gutterBottom:!0},"Teaser Image/Video")))},P=n(924),B=n(313),W=n.n(B),z=function(e){return{type:"SET_SELECTED_LINK",link:e}},H=function(e){return{type:"SET_TEXT_SELECTION",textSelection:e}},U=function(e){return{type:"SET_MANUAL_LINK_ID",linkId:e}},V=function(e){return{type:"EXIT_MANUAL_LINK_MODE",exit:e}},G=function(e){return{type:"SET_VIEW_MODE",val:e}},Z=function(e){return{type:"LINK_ACTIVE_NO_AUTO_TRIGGER",val:e}},J=function(e){return{type:"SHOW_LINK_SETTING_FOR",val:e}},X={},Q=Object(u.a)((function(e){return{button:{width:"100%",padding:e.spacing(1),margin:e.spacing(1)},paper:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary,height:e.spacing(16),width:"100%"}}}));var Y=function(e){var t=Q(),n=Object(m.c)();return i.a.createElement(f.a,{className:t.button,component:o.b,to:"/docs/".concat(e.docId),onClick:function(){n({type:"SET_CURRENT_DOC_ID",docId:e.docId})}},i.a.createElement(P.a,{className:t.paper,elevation:2},e.doc.title,i.a.createElement("div",null)))},q=Object(u.a)((function(e){return{button:{width:"100%",padding:e.spacing(1),margin:e.spacing(1)},paper:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary,height:e.spacing(16),width:"100%"}}}));var $=function(){var e=q(),t=Object(m.c)(),n=Object(m.d)((function(e){return Object.values(e.docs)}));return i.a.createElement(K.a,{container:!0,spacing:1},i.a.createElement(K.a,{item:!0,xs:2},i.a.createElement(f.a,{className:e.button,onClick:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E();return{type:"CREATE_DOC",docId:t,attrs:e=Object(a.a)({title:"Untitled",editorRawState:null,timestamp:Date.now(),searchedSentences:[],charts:[],chartsInEditor:[]},e,{id:t})}}();t(e)}},i.a.createElement(P.a,{className:e.paper,variant:"outlined"},i.a.createElement(W.a,null)))),n.map((function(e){return i.a.createElement(K.a,{key:e.id,item:!0,xs:2},i.a.createElement(Y,{doc:e,docId:e.id}))})))},ee=n(11),te=n(51),ne=n(22),ae=n(164),re=n.n(ae),ie=n(474),ce=n.n(ie),le=n(317),oe=n.n(le),ue=n(475),de=n.n(ue),se=n(476),fe=n.n(se),ge=n(477),he=n.n(ge),me=(n(668),n(669),n(670),n(14)),ve=n.n(me),pe=n(34),be=n(10),Ee=n(6),Oe=n(0),ye=n(250),je=function(e,t,n){try{n&&function(e){var t=["geoshape"].includes(e.mark)||"arc"===e.mark.type?{paintbrush:{type:"multi",toggle:!0,clear:"window:keypress"}}:{brush:{type:"interval",clear:"window:keypress"},paintbrush:{type:"multi",toggle:!0,clear:"window:keypress"}};e.selection=t,e.encoding.opacity={condition:[{selection:"paintbrush",value:1}],value:.1}}(t)}catch(i){}var r=Object(ye.compile)(t).spec;return r.data.forEach((function(e){e.url&&e.url.startsWith("data")&&(e.url="/vis-text-editor/"+e.url)})),r.signals=[].concat(Object(Ee.a)(r.signals||[]),[{name:"highlight",value:{data:[],start:0,end:100,enabled:!1}}]),r.marks.forEach((function(t){!function e(t,n){if("group"===t.type)return void(t.marks&&t.marks.forEach((function(t){return e(t,n)})));var r="shape"===t.type&&t.style.includes("geoshape"),i="highlight.enabled===true && (\n        (length(highlight.rangeField) === 0 && ".concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") || \n\n        length(highlight.rangeField) === 0 && length(highlight.field) === 2 && indexof(highlight.data, datum[highlight.field[0]]) != -1 && \n        indexof(highlight.data, datum[highlight.field[1]]) || \n\n        (length(highlight.rangeField) === 1 && ").concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) || \n\n        length(highlight.rangeField) === 1 && length(highlight.data) === 0 && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) ||\n\n        length(highlight.rangeField) === 2 && length(highlight.data) === 0 && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && \n        inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) ||\n\n        (length(highlight.rangeField) === 2 && ").concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) ||\n\n        length(highlight.rangeField) === 3 && length(highlight.data) === 0 && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && \n        inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) && inrange(datum[highlight.rangeField[2]], [highlight.range[4], highlight.range[5]]) ||\n\n        (length(highlight.rangeField) === 3 && ").concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) &&\n        inrange(datum[highlight.rangeField[2]], [highlight.range[4], highlight.range[5]])\n\n\n    )"),c="highlight.enabled===true && !(\n        (length(highlight.rangeField) === 0 && ".concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",")\n    )"),l=t.encode.update[n.channel],o=[{test:i,value:n.active},{test:c,value:n.inactive}];t.encode.update=Object(a.a)({},t.encode.update,Object(v.a)({},n.channel,o.concat(Object(Oe.isArray)(l)?l:[])))}(t,e)})),r};var Ae=n(256),xe=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];var l=Date.now();t&&l<t+a?(clearTimeout(n),n=setTimeout((function(){t=l,e.apply(void 0,i)}),a)):(t=l,e.apply(void 0,i))};return r},Se=n(103),Ie=n(104),ke=n(172),we=n.n(ke),Ce=n(1007),Te=n(1023),De=n(949);function Le(e){var t=Object(m.c)(),n={opacity:{active:1,inactive:.1},fill:{active:"#1f77b4",inactive:"#c7c7c7"}},c=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],l=e.chart.highlight,o=Object(r.useState)(l.active),u=Object(ee.a)(o,2),d=u[0],s=u[1],f=Object(r.useState)(l.inactive),g=Object(ee.a)(f,2),h=g[0],v=g[1];function p(n,r){s(r),t(x(e.chart.id,{highlight:Object(a.a)({},l,{active:r})}))}function b(n,r){v(r),t(x(e.chart.id,{highlight:Object(a.a)({},l,{inactive:r})}))}return i.a.createElement("div",null,i.a.createElement(R.a,{zIndex:"modal",className:we.a.panel,top:40,left:"45%",onMouseDown:function(e){return e.stopPropagation()}},i.a.createElement(R.a,{component:P.a,p:2},i.a.createElement(K.a,{container:!0,direction:"column",spacing:2},i.a.createElement(K.a,{item:!0},i.a.createElement(N.a,{gutterBottom:!0},"Highlight Option")),i.a.createElement(K.a,{item:!0},i.a.createElement(N.a,{variant:"caption"},"Channel"),i.a.createElement(R.a,null,i.a.createElement(De.a,{value:l.channel,onChange:function(r){var i=r.target.value;if(i!==l.channel){var c=n[i];s(c.active),v(c.inactive),t(x(e.chart.id,{highlight:Object(a.a)({channel:i},n[i])}))}}},Object.keys(n).map((function(e){return i.a.createElement(Ce.a,{key:e,value:e},e)}))))),i.a.createElement(K.a,{item:!0},i.a.createElement(N.a,{variant:"caption"},"Active"),"opacity"===l.channel?i.a.createElement(Te.a,{value:d,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:1,step:.05,onChange:function(e,t){s(t)},onChangeCommitted:p}):i.a.createElement(R.a,{className:we.a.picker},c.map((function(e){return i.a.createElement(R.a,{className:we.a.color,bgcolor:e,border:e===d?1:0,onMouseUp:function(t){return p(0,e)}})}))),i.a.createElement(N.a,{variant:"caption"},"Inactive"),"opacity"===l.channel?i.a.createElement(Te.a,{value:h,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:1,step:.05,onChange:function(e,t){v(t)},onChangeCommitted:b}):i.a.createElement(R.a,{className:we.a.picker},c.map((function(e){return i.a.createElement(R.a,{className:we.a.color,bgcolor:e,border:e===h?1:0,onMouseUp:function(t){return b(0,e)}})}))))))))}var Ne=n(1008),Re=n(254),Me=n.n(Re),Fe=Object(r.memo)((function(e){var t=e.block,n=e.blockProps,c=(e.customStyleMap,e.customStyleFn,e.decorator,e.forceSelection,e.offsetKey,e.selection),l=(e.tree,e.contentState,e.blockStyleFn,e.preventScroll,e.style),o=Object(be.a)(e,["block","blockProps","customStyleMap","customStyleFn","decorator","forceSelection","offsetKey","selection","tree","contentState","blockStyleFn","preventScroll","style"]),u=Object(r.useState)(null),d=Object(ee.a)(u,2),s=d[0],f=d[1],g=Object(r.useRef)(null),h=Object(r.useRef)(null),v=Object(r.useState)(1),p=Object(ee.a)(v,2),b=p[0],E=p[1],O=Object(m.d)((function(e){return e.charts[n.id]})),y=Object(r.useState)(!1),j=Object(ee.a)(y,2),A=j[0],x=j[1],S=Object(m.d)((function(e){return e.ui.viewMode})),I=Object(m.d)((function(e){return Object.values(e.links).filter((function(e){return e.chartId===n.id}))}),m.b),k=Object(r.useMemo)((function(){return je(O.highlight,JSON.parse(JSON.stringify(O.liteSpec)),!1)}),[O.spec,O.highlight]);function w(e,t){if(e)g.current.getBoundingClientRect().width}Object(r.useEffect)((function(){(function(){var e=Object(pe.a)(ve.a.mark((function e(){var t,n,a,r,i,c;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Se.a)(k),e.next=3,new Ie.a(t).runAsync();case 3:return n=e.sent,e.next=6,n.toCanvas();case 6:return a=e.sent,r=a.height/a.width,E(r),e.next=11,Object(Ae.a)(h.current,k,{actions:!1});case 11:i=e.sent,c=i.view,f(c);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[k]),Object(r.useEffect)(xe(Object(pe.a)(ve.a.mark((function e(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(s,b);case 1:case"end":return e.stop()}}),e)}))),500)),Object(r.useEffect)((function(){s&&(I.some((function(e){return e.active}))?I.filter((function(e){return e.active})).forEach((function(e){var t;s.signal("highlight",{type:e.type,data:e.data||[],field:(null===(t=e.feature)||void 0===t?void 0:t.field)||"",enabled:!0,rangeField:e.rangeField||[],range:e.range||[]}).runAsync()})):s.signal("highlight",{enabled:!1}).runAsync())}),[I]);var C=!S&&c.getAnchorKey()===t.getKey();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",Object.assign({ref:g},o,{style:Object(a.a)({},l,{position:"relative",width:"fit-content"})}),i.a.createElement("div",null,C&&i.a.createElement(Ne.a,{onMouseDown:function(){x(!A)},"aria-label":"settings"},i.a.createElement(Me.a,null))),i.a.createElement("div",{ref:h}),C&&A&&i.a.createElement(Le,{chart:O})))})),Ke=n(75),_e=oe()(),Pe=fe()(),Be=de()(),We=he()(),ze=Be.AlignmentTool,He=_e.Toolbar,Ue=[Pe,We,Be,_e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.decorator?e.decorator(Fe):Fe;return{blockRendererFn:function(e,n){var r=n.getEditorState;if("atomic"===e.getType()){var i=r().getCurrentContent();if(!e.getEntityAt(0))return;var c=i.getEntity(e.getEntityAt(0)),l=c.getData();if("CHART"===c.getType())return{component:t,editable:!1,props:Object(a.a)({},l)}}return null},ChartBlock:Fe}}({decorator:Object(ae.composeDecorators)(Pe.decorator,We.decorator,Be.decorator)})];function Ve(){return i.a.createElement(r.Fragment,null,i.a.createElement(He,null,(function(e){return i.a.createElement("div",null,i.a.createElement(Ke.BoldButton,e),i.a.createElement(Ke.ItalicButton,e),i.a.createElement(Ke.UnderlineButton,e),i.a.createElement(Ke.CodeButton,e),i.a.createElement(le.Separator,e),i.a.createElement(Ke.HeadlineOneButton,e),i.a.createElement(Ke.HeadlineTwoButton,e),i.a.createElement(Ke.HeadlineThreeButton,e),i.a.createElement(Ke.UnorderedListButton,e),i.a.createElement(Ke.OrderedListButton,e),i.a.createElement(Ke.BlockquoteButton,e),i.a.createElement(Ke.CodeBlockButton,e))})),i.a.createElement(ze,null))}var Ge=n(326),Ze=n.n(Ge),Je=function(e,t){return{type:"CREATE_LINKS",links:t.map((function(t){return Object(a.a)({},t,{timestamp:Date.now(),docId:e,id:E("link-")})}))}},Xe=function(e){return{type:"DELETE_LINK",linkId:e}},Qe=function(e){return{type:"DEACTIVATE_LINK",linkId:e}},Ye=Object(j.a)((function(e){return e.links}),(function(e,t){return t}),(function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=Object(ee.a)(e,2);n[0];return n[1].docId===t})))}));var qe=n(482),$e=n.n(qe);var et=[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"TEXT_SELECTION"===n.getEntity(t).getType()}),t)},component:function(e){return i.a.createElement("span",{className:$e.a.textSelection,"data-offset-key":e.offsetKey},e.children)}},{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)},component:function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.links})),a=Ze.a.potentialLink,r=e.contentState.getEntity(e.entityKey).getData();return n[r.id]&&n[r.id].isConfirmed&&(a=Ze.a.link),i.a.createElement("span",{className:a,onMouseOver:function(){t({type:"ACTIVATE_LINK",linkId:r.id}),t(Z(!0))},onMouseLeave:function(){Qe(r.id),t(Qe(r.id)),t(Z(!1))},onClick:function(){var n=JSON.parse(JSON.stringify(r));n.startIndex=e.start,n.endIndex=e.end,t(z(n))},"data-offset-key":e.offsetKey},e.children)}}];function tt(e){Object(m.c)();var t=Object(te.f)().docId,n=(Object(m.d)((function(e){return e.docs[t]})),Object(m.d)((function(e){return e.docs[t].editorRawState}))),c=Object(r.useRef)(null),l=null===n?ne.EditorState.createEmpty().getCurrentContent():Object(ne.convertFromRaw)(function(e){var t=Object(a.a)({},e.entityMap);return Object.keys(t).forEach((function(e){"LINK"===t[e].type&&(t[e].data.isConfirmed||delete t[e])})),{blocks:e.blocks,entityMap:t}}(n)),o=Object(r.useState)(ne.EditorState.createWithContent(l)),u=Object(ee.a)(o,2),d=u[0],s=u[1],f=e.viewMode;return i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:ce.a.viewer},i.a.createElement(re.a,{editorState:d,plugins:Ue,onChange:function(e){s(e)},handleKeyCommand:function(e){var t=ne.RichUtils.handleKeyCommand(d,e);return t?(s(t),"handled"):"not-handled"},decorators:et,ref:c,readOnly:f})))}function nt(e){console.log("Viewer Mode Active!!!");var t=Object(m.c)();return Object(r.useEffect)((function(){t(G(!0))}),[]),i.a.createElement(K.a,{container:!0,spacing:2},i.a.createElement(K.a,{item:!0,xs:8},i.a.createElement(tt,{viewMode:!0})))}var at=n(327),rt=n.n(at),it=n(483),ct=n.n(it),lt=n(1020),ot=n(1019);function ut(e){return i.a.createElement(ot.a,Object.assign({elevation:6,variant:"filled"},e))}var dt=n(1021);var st=Object(r.memo)((function(e){var t=Object(m.c)(),n=Object(m.d)((function(t){return t.docs[e.docId].chartsInEditor})),a=Object(r.useState)(null),c=Object(ee.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(!1),d=Object(ee.a)(u,2),s=d[0],f=d[1];return i.a.createElement(P.a,{className:ct.a.container,onKeyDown:function(a){var r,i;"Delete"===a.key&&(n.includes(e.id)?o("Chart can not be deleted. It is active in the editor!"):t((r=e.id,i={docId:e.docId},{type:"DELETE_CHART",chartId:r,attrs:i})))},tabIndex:"0",elevation:s?2:0},i.a.createElement("div",{draggable:!0,onDragStart:function(t){t.dataTransfer.setData("chartId",e.id)},onMouseEnter:function(){f(!0)},onMouseLeave:function(){f(!1)}},i.a.createElement(dt.a,{src:e.thumbnail,variant:"rounded",style:{height:"150px",width:"150px"}})),i.a.createElement(lt.a,{open:null!==l,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){o(null)}},i.a.createElement(ut,{severity:"error"},l)))})),ft=function(e){return gt.apply(this,arguments)};function gt(){return(gt=Object(pe.a)(ve.a.mark((function e(t){var n,a,r,i,c,l,o,u,d,s,f,g,h,m,v,p,b,E,O,y,j,A,x,S,I,k,w,C,T;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data){e.next=2;break}return e.abrupt("return",[]);case 2:return n={},a=Object(Se.a)(t),e.next=6,new Ie.a(a).runAsync();case 6:r=e.sent,i=r.getState({data:Oe.truthy,signals:Oe.falsy,recurse:!0}),c=!0,l=!1,o=void 0,e.prev=11,u=t.marks[Symbol.iterator]();case 13:if(c=(d=u.next()).done){e.next=73;break}s=d.value,f=i.data[s.name].map((function(e){return e.datum})),g=!0,h=!1,m=void 0,e.prev=19,v=f[Symbol.iterator]();case 21:if(g=(p=v.next()).done){e.next=56;break}b=p.value,E="shape"===s.type&&s.style.includes("geoshape"),O=Object.entries(b),E&&(O=O.concat(Object.entries(b.properties))),y=!0,j=!1,A=void 0,e.prev=29,x=O[Symbol.iterator]();case 31:if(y=(S=x.next()).done){e.next=39;break}if(I=Object(ee.a)(S.value,2),k=I[0],w=I[1],Object(Oe.isString)(w)){e.next=35;break}return e.abrupt("continue",36);case 35:n[w]={value:w,type:"string",field:k,data:b.name};case 36:y=!0,e.next=31;break;case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(29),j=!0,A=e.t0;case 45:e.prev=45,e.prev=46,y||null==x.return||x.return();case 48:if(e.prev=48,!j){e.next=51;break}throw A;case 51:return e.finish(48);case 52:return e.finish(45);case 53:g=!0,e.next=21;break;case 56:e.next=62;break;case 58:e.prev=58,e.t1=e.catch(19),h=!0,m=e.t1;case 62:e.prev=62,e.prev=63,g||null==v.return||v.return();case 65:if(e.prev=65,!h){e.next=68;break}throw m;case 68:return e.finish(65);case 69:return e.finish(62);case 70:c=!0,e.next=13;break;case 73:e.next=79;break;case 75:e.prev=75,e.t2=e.catch(11),l=!0,o=e.t2;case 79:e.prev=79,e.prev=80,c||null==u.return||u.return();case 82:if(e.prev=82,!l){e.next=85;break}throw o;case 85:return e.finish(82);case 86:return e.finish(79);case 87:return t.data.forEach((function(e){r.data(e.name)})),C=mt(t),t.scales.filter((function(e){return["ordinal","band","point"].includes(e.type)})).forEach((function(e){t.data.forEach((function(t){r.data(t.name).forEach((function(a){if(e.domain.field){var r=e.domain.field,i=Object(Oe.isDate)(a[r])?a[r]:Object(Oe.toString)(a[r]),c=Object(Oe.isDate)(i)?"date":"string";n[i]={value:i,type:c,field:r,data:t.name}}else e.domain.fields&&e.domain.fields.forEach((function(e){var r=Object(Oe.isString)(e)?e:e.field,i=Object(Oe.isDate)(a[r])?a[r]:Object(Oe.toString)(a[r]),c=Object(Oe.isDate)(i)?"date":"string";n[i]={value:i,type:c,field:r,data:t.name}}))}))})),Object(Oe.isArray)(e.domain)&&e.domain.forEach((function(a){a=Object(Oe.isDate)(a)?a:Object(Oe.toString)(a);var r=Object(Oe.isDate)(a)?"date":"string",i=ht(t,e.name);n[a]={value:a,type:r,field:i,data:null}}))})),T={axes:Object.values(C),features:Object.values(n)},e.abrupt("return",T);case 92:case"end":return e.stop()}}),e,null,[[11,75,79,87],[19,58,62,70],[29,41,45,53],[46,,48,52],[63,,65,69],[80,,82,86]])})))).apply(this,arguments)}var ht=function(e,t){var n=!0,a=!1,r=void 0;try{for(var i,c=e.marks[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value;if(l.encode.enter)for(var o=0,u=Object.entries(l.encode.enter);o<u.length;o++){var d=Object(ee.a)(u[o],2)[1];if(d.scale===t&&d.field)return d.field}if(l.encode.update)for(var s=0,f=Object.entries(l.encode.update);s<f.length;s++){var g=Object(ee.a)(f[s],2)[1];if(g.scale===t&&g.field)return g.field}}}catch(h){a=!0,r=h}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return null},mt=function(e){var t={};return e.scales.forEach((function(n){var a=n.name,r=Object(Oe.isArray)(n.domain.fields)&&n.domain.fields[0].hasOwnProperty("field")?n.domain.fields[0].field:Object(Oe.isArray)(n.domain.fields)?n.domain.fields:n.domain.field,i=n.domain.data,c=n.type,l=e.axes?e.axes.filter((function(e){return e.scale===a&&void 0!==e.title||null})):void 0,o=Object(Oe.isArray)(l)&&l.length>0&&l[0].hasOwnProperty("title")?l[0].title:r||void 0,u={name:a,field:r,data:i,type:c,title:o};t[a]=u})),t},vt=function(){var e=Object(pe.a)(ve.a.mark((function e(t){var n,a,r,i;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(Se.a)(t),e.next=3,new Ie.a(n).runAsync();case 3:return a=e.sent,e.next=6,a.toImageURL("png");case 6:return r=e.sent,e.next=9,pt(r);case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function pt(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){var e=250/a.height*a.width,n=document.createElement("canvas"),r=n.getContext("2d");n.width=e,n.height=250,r.drawImage(this,0,0,e,250),t(n.toDataURL())}}))}function bt(e){var t=Object(m.c)(),n=Object(te.f)().docId,a=Object(r.useState)(!1),c=Object(ee.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(null),d=Object(ee.a)(u,2),s=d[0],f=d[1],g=Object(m.d)((function(e){return S(e,n)}));return i.a.createElement("div",{className:rt.a.container,onDragEnter:function(){o(!0)},onDragLeave:function(){o(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var a=e.dataTransfer.files[0];if(a){if(a.type.match("application/json")){var r=new FileReader;r.onload=function(){var e=Object(pe.a)(ve.a.mark((function e(a){var r,i,c,l;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(a.target.result),(i=Object(ye.compile)(r).spec).data.forEach((function(e){e.url&&e.url.startsWith("data")&&(e.url="/vis-text-editor/"+e.url)})),e.next=6,vt(i);case 6:return c=e.sent,e.next=9,ft(i);case 9:l=e.sent,t(A(n,i,r,{properties:l,thumbnail:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f("Syntex error in specification file!");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(a)}else f("Wrong format!");o(!1)}}},i.a.createElement(lt.a,{open:null!==s,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){f(null)}},i.a.createElement(ut,{severity:"error"},s)),i.a.createElement("div",{className:rt.a.draggingArea,style:{opacity:l?.5:0}},"Drop Vega-lite Spec"),g.map((function(e){return i.a.createElement(st,{key:e.id,docId:n,id:e.id,spec:e.spec,thumbnail:e.thumbnail})})))}var Et=n(484),Ot=n.n(Et),yt=n(485),jt=n.n(yt),At=n(999),xt=n(946),St=n(1011),It=n(1010),kt=n(1009),wt=n(486),Ct=n.n(wt);function Tt(e){var t=Object(m.c)(),n=window.getSelection(),a=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null;function r(t,n){n.preventDefault(),n.stopPropagation(),e.onSelected(t)}return a?i.a.createElement(R.a,{zIndex:"modal",left:a.x+20,top:a.y+20,className:jt.a.suggestionPanel},i.a.createElement(P.a,null,i.a.createElement(At.a,null,i.a.createElement(xt.a,{button:!0,onMouseDown:function(){e.onCreateLinkSelect(),t(H(e.textSelection))}},i.a.createElement(kt.a,null,i.a.createElement(Ct.a,null)),"Create Link"),e.suggestions.slice(0,5).map((function(e,t){return i.a.createElement(xt.a,{key:t,button:!0,dense:!0,onMouseDown:r.bind(null,e)},i.a.createElement(It.a,null,i.a.createElement(dt.a,{alt:"chart",src:e.thumbnail})),i.a.createElement(St.a,{primary:e.text,secondary:i.a.createElement(N.a,{component:"span",variant:"caption",color:"textSecondary"},e.chartId)}))}))))):""}var Dt=n(487),Lt=n.n(Dt),Nt=n(1012);function Rt(e){var t=Object(m.c)(),n=window.getSelection(),a=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null;return a&&e.selectedLink&&!e.selectedLink.isConfirmed&&!e.textSelection?i.a.createElement(R.a,{zIndex:"modal",left:a.x+10,top:a.y+10,className:Lt.a.potentialLinkControls},i.a.createElement(P.a,{elevation:1},i.a.createElement(Nt.a,{size:"small",variant:"text",fullWidth:!0,"aria-label":"small button group"},i.a.createElement(f.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),t({type:"CONFIRM_LINK",linkId:e.selectedLink.id}),e.onAccept(e.selectedLink),t(z(null))}},"Accept"),i.a.createElement(f.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),e.onDiscard(e.selectedLink),t(z(null))}},"Discard")))):""}var Mt=function(e,t,n){var a;return 0===t.length?[]:(a=[]).concat.apply(a,Object(Ee.a)(e.map((function(e){return e.properties.features.filter((function(e){return"string"===e.type&&e.value?e.value.toLowerCase().startsWith(t.toLowerCase()):"date"===e.type&&e.value.toString().toLowerCase().includes(t.toLowerCase())})).map((function(t){return{chartId:e.id,thumbnail:e.thumbnail,feature:t,text:t.value.toString(),startIndex:n}}))}))))},Ft=n(47),Kt=n.n(Ft),_t=n(717),Pt=function(){var e=Object(pe.a)(ve.a.mark((function e(t,n,a,r){var i,c,l,o;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uri:"https://koriserver.namwkim.org/discover-links",method:"POST",headers:{Accept:"application/json","Accept-Charset":"utf-8"},json:!0,body:{text:t,sentenceOffset:n,charts:a,blockKey:r}},c=Kt.a.promisify(_t),e.prev=3,e.next=6,c(i);case 6:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:null===(l=o.body)||void 0===l?void 0:l.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Bt=function(e){var t=e.getCurrentContent(),n=e.getSelection(),a=n.getAnchorKey(),r=t.getBlockForKey(a),i=n.getAnchorOffset(),c=r.getText().substr(0,i),l=n.getAnchorOffset(),o=c.split(" ").slice(-1).pop();return{text:o,startIndex:l-o.length,endIndex:l}},Wt=function(e,t){return e.forEach((function(e){t=zt(e,t)})),t},zt=function(e,t){var n=t.getCurrentContent(),r=t.getSelection(),i=r.getAnchorKey(),c=r.getAnchorOffset(),l=e.startIndex,o=e.endIndex;l<0&&(l=0);var u=n.createEntity("LINK","MUTABLE",Object(a.a)({},e)),d=u.getLastCreatedEntityKey(),s=r.merge({anchorKey:e.blockKey,focusKey:e.blockKey,anchorOffset:l,focusOffset:o}),f=t.getSelection().merge({anchorOffset:Bt(t).startIndex});u=ne.Modifier.replaceText(t.getCurrentContent(),"@"===(null===e||void 0===e?void 0:e.trigger)?f:s,e.text,t.getCurrentInlineStyle(),d);var g=o>c?o:c,h=ne.EditorState.push(t,u,"insert-characters"),m=h.getSelection().merge({anchorKey:i,focusKey:i,focusOffset:g,anchorOffset:g});return h=ne.EditorState.moveSelectionToEnd(h),h=ne.EditorState.forceSelection(h,m)},Ht=function(e,t){if(e){var n=t.getCurrentContent(),a=ne.Modifier.applyEntity(n,e,null),r=ne.EditorState.push(t,a,"apply-entity"),i=Math.max(e.getAnchorOffset(),e.getFocusOffset()),c=r.getSelection().merge({focusOffset:i,anchorOffset:i});return r=ne.EditorState.moveSelectionToEnd(r),r=ne.EditorState.forceSelection(r,c)}},Ut=function(e){var t=e.getCurrentContent(),n=e.getSelection().getAnchorKey();return{blockText:t.getBlockForKey(n).getText(),blockKey:n}},Vt=function(e,t,n){var r=Object(a.a)({},e.entityMap);return t=t.filter((function(e){var t=!0;return Object.keys(r).forEach((function(a){"LINK"===r[a].type&&r[a].data.isConfirmed&&r[a].data.text===(null===e||void 0===e?void 0:e.text)&&n.includes(r[a].data.text)&&(t=!1)})),t}))},Gt=n(488),Zt=function(e,t,n,a){var r=e.text,i=e.extent,c=e.blockKey,l=e.chartId,o=t.feature,u=t.values,d=n.rangeField,s=n.range;return{text:r,startIndex:i[0],endIndex:i[1],blockKey:c,chartId:l,feature:o||"",data:u||[],rangeField:d||[],range:s||[],active:!1,isConfirmed:!0,trigger:a}};function Jt(e){var t=Object(m.c)(),n=Object(te.f)().docId,c=Object(m.d)((function(e){return e.docs[n]})),l=Object(m.d)((function(e){return S(e,n)})),o=Object(m.d)((function(e){return e.docs[n].editorRawState})),u=Object(m.d)((function(e){return I(e,n)})),d=Object(m.d)((function(e){return e.ui.selectedLink})),s=Object(m.d)((function(e){return Ye(e,n)})),f=Object(m.d)((function(e){return e.ui.exitManualLink})),g=Object(m.d)((function(e){return e.ui.manualLinkId})),h=Object(m.d)((function(e){return e.ui.linkActiveNoAutoTrigger})),p=Object(m.d)((function(e){return e.ui.textSelection})),b=Object(r.useState)(p),O=Object(ee.a)(b,2),y=O[0],j=O[1],A=Object(r.useRef)(null),x=Object(r.useState)([]),k=Object(ee.a)(x,2),C=k[0],T=k[1],D=Object(m.d)((function(e){return e.docs[n].searchedSentences})),L=null===o?ne.EditorState.createEmpty().getCurrentContent():Object(ne.convertFromRaw)(o),N=Object(r.useState)(ne.EditorState.createWithContent(L)),R=Object(ee.a)(N,2),M=R[0],F=R[1],K=Object(r.useState)(null),_=Object(ee.a)(K,2),P=_[0],B=_[1],W=Object(r.useState)(null),G=Object(ee.a)(W,2),Z=G[0],J=G[1],X=Object(r.useState)(null),Q=Object(ee.a)(X,2),Y=Q[0],q=Q[1],$=Object(r.useState)([]),ae=Object(ee.a)($,2),ie=ae[0],ce=ae[1],le=Object(r.useRef)();function oe(e){var t=Object(ne.convertToRaw)(e.getCurrentContent()),n=e.getSelection(),a=n.getAnchorKey(),r=t.blocks.find((function(e){return e.key===a})),i=n.getAnchorOffset();return r.entityRanges.find((function(e){return i>=e.offset&&i<=e.offset+e.length}))}return Object(r.useEffect)((function(){return t(V(!1)),B(null),t(H(null)),t(U(null)),le=setInterval((function(){var e,t;console.log("Checking for autosuggestions every:",5e3),(null===A||void 0===A?void 0:null===(e=A.current)||void 0===e?void 0:null===(t=e.props)||void 0===t?void 0:t.editorState)&&J(Ut(A.current.props.editorState))}),5e3),function(){return clearInterval(le.current)}}),[]),Object(r.useEffect)((function(){f&&(F(Ht(P,M)),A.current.focus(),t(V(!1)),B(null),window.dispatchEvent(new KeyboardEvent("keypress",{key:"a"})))}),[f]),Object(r.useEffect)((function(){f&&void 0===s[g]&&(F(Ht(P,M)),B(null)),s[g]&&(F(Wt([s[g]],M)),t(U(null)),B(null),window.dispatchEvent(new KeyboardEvent("keypress",{key:"a"})))}),[g,f]),Object(r.useEffect)((function(){var e=Object(ne.convertToRaw)(M.getCurrentContent());t(w(c.id,{editorRawState:e}))}),[M]),Object(r.useEffect)((function(){var e=Object(ne.convertToRaw)(M.getCurrentContent()).entityMap,n=[];Object.keys(e).forEach((function(t){"LINK"===e[t].type&&s[e[t].data.id]&&n.push(e[t].data.id)})),Object.keys(s).forEach((function(e){n.includes(e)||t(Xe(e))}))}),[Object.keys(Object(ne.convertToRaw)(M.getCurrentContent()).entityMap).length]),Object(r.useEffect)((function(){(function(){var e=Object(pe.a)(ve.a.mark((function e(){var n,a,r,i,l,o,s,f,g;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===Z){e.next=32;break}if(n=Z.blockText,!h){e.next=4;break}return e.abrupt("return");case 4:if(!d){e.next=6;break}return e.abrupt("return");case 6:if(!y&&"INVALID"!=y){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Object(Gt.a)(n).sentences().json();case 10:a=e.sent,r=[],i=[],l=0;case 14:if(!(l<a.length)){e.next=29;break}if((o=a[l].text).includes(".")){e.next=18;break}return e.abrupt("continue",26);case 18:if(!(null===D||void 0===D?void 0:D.includes(o))){e.next=20;break}return e.abrupt("continue",26);case 20:return i.push(o),s={text:o,startIndex:n.indexOf(o),endIndex:n.indexOf(o)+o.length},e.next=24,Pt(s.text,s.startIndex,u,Z.blockKey);case 24:f=e.sent,r=r.concat(f);case 26:l++,e.next=14;break;case 29:t(w(c.id,{searchedSentences:null===D||void 0===D?void 0:D.concat(i)})),r.length>0&&(g=Object(ne.convertToRaw)(M.getCurrentContent()),(r=Vt(g,r,n)).length>0&&ce(r)),J(null);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[Z]),i.a.createElement(r.Fragment,null,i.a.createElement(Ve,null),i.a.createElement("div",{className:Ot.a.editor,onDragOver:function(e){e.preventDefault(),e.stopPropagation(),A.current.focus()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.getData("chartId"),n=l.find((function(e){return e.id===t})),a=u.find((function(e){return e.id===t}));n&&!a&&(!function(e){var t=M.getCurrentContent(),n=(t=t.createEntity("CHART","IMMUTABLE",{id:e.id})).getLastCreatedEntityKey(),a=ne.AtomicBlockUtils.insertAtomicBlock(M,n," ");F(a)}(n),e.dataTransfer.clearData())}},i.a.createElement(re.a,Object(v.a)({editorState:M,plugins:Ue,onChange:function(e){if(F(e),ie.length>0){var n=Je(c.id,ie);F(Wt(n.links,e)),t(n),ce([])}var a=Object(ne.convertToRaw)(e.getCurrentContent()),r=Bt(e),i=e.getCurrentContent().getPlainText(" ").trim(),l=null===D||void 0===D?void 0:D.filter((function(e){return i.includes(e)}));if(t(w(c.id,{searchedSentences:l})),r.text.startsWith("@")){var o=Mt(u,r.text.slice(1),r.startIndex);T(o)}else T([]);var s=a.entityMap;if(Object.keys(s).length!==u.length){var g=Object.values(s).reduce((function(e,t){return"CHART"===t.type&&e.push(t.data.id),e}),[]);t(function(e,t){return{type:"UPDATE_CHARTS_IN_EDITOR",docId:e,charts:t}}(c.id,g))}var h=e.getSelection(),m=h.getAnchorOffset(),v=h.getAnchorKey();d&&v&&(v!==d.blockKey||m<d.startIndex||m>d.endIndex)&&t(z(null));var p=function(e,t,n){n=n||"\n";var a=t.getStartKey(),r=t.getEndKey(),i=e.getBlockMap(),c="",l=!1,o=i.skipUntil((function(e){return e.getKey()===a})).takeUntil((function(e){var t=l;return e.getKey()===r&&(l=!0),t}));if(o.length>1)return"INVALID";var u=o.map((function(e){var n=e.getKey(),i=e.getText(),l=0,o=i.length;return n===a&&(l=t.getStartOffset()),n===r&&(o=t.getEndOffset()),i=i.slice(l,o),c=n,i})).join(n),d=t.getStartOffset(),s=t.getEndOffset();return t.isBackward&&(s=t.getEndOffset(),d=t.getStartOffset()),t.getStartOffset()!==t.getEndOffset()?{text:u,startIndex:d,endIndex:s,blockKey:c,isBackward:t.isBackward}:null}(e.getCurrentContent(),h," ");if(j(p),p&&"INVALID"!=p){var b=Mt(u,p.text.trim(),p.startIndex);0!==b.length?T(b):T([{text:"NoLinkFound!"}])}"unstyled"!==e.getCurrentContent().getBlockForKey(v).getType()||f||!P||y||(t(V(!0)),t(H(null)))},onBlur:function(){T([])},handleKeyCommand:function(e){var t=ne.RichUtils.handleKeyCommand(M,e);return t?(F(t),"handled"):"not-handled"},handlePastedText:function(e){return J({blockText:e.split("\n")[0],blockKey:Ut(M).blockKey}),"not-handled"},stripPastedStyles:!0,decorators:et,ref:A,onTab:function(e){return e.preventDefault(),e.stopPropagation(),J(Ut(M)),"handled"}},"stripPastedStyles",!0))),C.length>=1&&u.length>0&&i.a.createElement(Tt,{suggestions:C.filter((function(e){return"NoLinkFound!"!==e.text})),textSelection:y,onSelected:function(e){var n={text:e.text,extent:[e.startIndex,e.startIndex+e.text.length],blockKey:M.getSelection().getAnchorKey(),chartId:e.chartId},r=Zt(n,{feature:e.feature,values:[isNaN(Number(e.text))?e.text:Number(e.text)]},{},"@"),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=E("link-");return{type:"CREATE_LINK",linkId:r,attrs:n=Object(a.a)({docId:e,timestamp:Date.now()},t,{},n,{id:r})}}(c.id,r),l=Wt([i.attrs],M);t(i),T([]),F(l)},onCreateLinkSelect:function(){t(V(!1)),B(M.getSelection()),F(function(e,t){var n=t.getCurrentContent(),r=t.getSelection(),i=n.createEntity("TEXT_SELECTION","MUTABLE",Object(a.a)({},e)),c=e.startIndex,l=e.endIndex;e.isBackward&&(c=e.endIndex,l=e.startIndex);var o=i.getLastCreatedEntityKey(),u=r.merge({anchorOffset:c,focusOffset:l});i=ne.Modifier.replaceText(t.getCurrentContent(),u,e.text,t.getCurrentInlineStyle(),o);var d=ne.EditorState.push(t,i,"apply-entity"),s=d.getSelection().merge({focusOffset:e.endIndex,anchorOffset:e.endIndex});return d=ne.EditorState.moveSelectionToEnd(d),d=ne.EditorState.forceSelection(d,s)}(y,M)),q("Click on any chart avatar to begin linking!")}}),i.a.createElement(Rt,{textSelection:y,selectedLink:d,onDiscard:function(e){var n=M.getSelection(),a=ne.ContentState.createFromText(""),r=oe(M),i=n.merge({anchorOffset:r.offset,focusOffset:r.offset+r.length});a=ne.Modifier.replaceText(M.getCurrentContent(),i,e.text,M.getCurrentInlineStyle());var c=ne.EditorState.push(M,a,"apply-entity"),l=c.getSelection().merge({focusOffset:e.endIndex,anchorOffset:e.endIndex});c=ne.EditorState.moveSelectionToEnd(c),c=ne.EditorState.forceSelection(c,l),F(c),t(Xe(e.id))},onAccept:function(e){var t=oe(M),n=JSON.parse(JSON.stringify(e));n.startIndex=t.offset,n.endIndex=t.offset+t.length,n.isConfirmed=!0,F(Wt([n],M))}}),i.a.createElement(lt.a,{open:null!==Y,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:5e3,onClose:function(){q(null)}},i.a.createElement(ut,{severity:"info"},Y)))}var Xt=n(952),Qt=n(929),Yt=n(927),qt=n(490),$t=n.n(qt),en=n(1018),tn=n(1013),nn=Object(u.a)((function(e){return{root:{width:300,margin:e.spacing(1)}}}));function an(e){var t=e.children,n=e.open,a=e.value;return i.a.createElement(tn.a,{open:n,enterTouchDelay:0,placement:"top",title:a},t)}function rn(e){var t,n,a=nn(),c=Object(r.useState)(""),l=Object(ee.a)(c,2),o=l[0],u=l[1],d=i.a.useState(null),s=Object(ee.a)(d,2),f=s[0],g=s[1],m=i.a.useState(null),v=Object(ee.a)(m,2),p=v[0],b=v[1],O=Object(r.useState)([{value:1900,label:1900},{value:2e3,label:2e3}]),y=Object(ee.a)(O,2),j=y[0],A=y[1],x=Object(r.useState)(!1),S=Object(ee.a)(x,2),I=S[0],k=S[1],w=Object(r.useState)(null),C=Object(ee.a)(w,2),T=C[0],D=C[1],L=Object(r.useState)([]),N=Object(ee.a)(L,2),R=N[0],M=N[1],F=e.chartProperties,_=F.axes.map((function(e){return null===e||void 0===e?void 0:e.field})),P=Object(Ee.a)(new Set(F.features.map((function(e){return e.field}))));function B(t){u(t);var n,a,r=(n=F.axes,a=t,n.find((function(e){return(null===e||void 0===e?void 0:e.field)===a})));if(r&&!["ordinal","band","point"].includes(null===r||void 0===r?void 0:r.type)){var i=function(e){for(var t,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=e.length-1;r>=0;r--)(t=+e[r])<n&&(n=t),t>a&&(a=t);return[n,a]}(e.viewData.map((function(e){return e[t]}))),c=Object(ee.a)(i,2),l=c[0],o=c[1];if(["date","year","month","time","year_year"].includes(t.toLowerCase())||"temporal"===(null===r||void 0===r?void 0:r.type)){var d=new Date(l),s=new Date(o),f=[{value:l,label:d.toLocaleDateString(),type:"date"},{value:o,label:s.toLocaleDateString(),type:"date"}];A(f),g([f[0].value,f[1].value])}else{var h=[{value:l,label:l.toLocaleString()},{value:o,label:o.toLocaleString()}];A(h),g([h[0].value,h[1].value])}b(null),k(!0)}if(!r||["ordinal","band","point","string"].includes(null===r||void 0===r?void 0:r.type)){var m,v=null===F||void 0===F?void 0:F.features.filter((function(e){return(null===e||void 0===e?void 0:e.field)===t}));v||(v=null===F||void 0===F?void 0:null===(m=F.features)||void 0===m?void 0:m.filter((function(e){var n;return(null===e||void 0===e?void 0:null===(n=e.properties)||void 0===n?void 0:n.field)===t}))),M(v),g(null),k(!1)}}return _=_.concat(P),_=Object(Ee.a)(new Set(_)),Object(r.useEffect)((function(){e.onFilterUpdate(e.id,{field:o,intervalValues:f,features:p})}),[f,p]),Object(r.useEffect)((function(){B(_[0])}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(K.a,{className:a.root,container:!0,spacing:1},i.a.createElement(K.a,{item:!0,xs:1},i.a.createElement(Ne.a,{"aria-label":"close",className:a.margin,size:"small"},i.a.createElement($t.a,{fontSize:"inherit",onMouseDown:function(){return e.onDelete(e.id)}}))),i.a.createElement(K.a,{item:!0,xs:6},i.a.createElement(Yt.a,{className:a.formControl},i.a.createElement(Xt.a,{htmlFor:"age-native-simple"},"Field"),i.a.createElement(De.a,{native:!0,value:o,onChange:function(e){B(e.target.value)}},_.map((function(e){return i.a.createElement("option",{key:E(e),value:e},e)})))))),i.a.createElement(K.a,{container:!0,spacing:1},i.a.createElement(K.a,{item:!0,xs:1}),i.a.createElement(K.a,{item:!0,xs:10},!I&&i.a.createElement(en.a,{multiple:!0,id:"combo-box-demo",options:R,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.value},onChange:function(e,t){t&&b(t)},size:"small",renderInput:function(e){return i.a.createElement(h.a,Object.assign({},e,{label:"Select Values",variant:"outlined"}))}}))),i.a.createElement(K.a,{container:!0,spacing:1},i.a.createElement(K.a,{item:!0,xs:1}),i.a.createElement(K.a,{item:!0,xs:10},I&&i.a.createElement(Te.a,{value:f,onChange:function(e,t){g(t)},valueLabelDisplay:"auto",ValueLabelComponent:an,"aria-labelledby":"range-slider",marks:j,min:null===(t=j[0])||void 0===t?void 0:t.value,max:null===(n=j[1])||void 0===n?void 0:n.value,valueLabelFormat:function(e){var t;return i.a.createElement("div",null,"date"===(null===(t=j[0])||void 0===t?void 0:t.type)?new Date(e).toLocaleDateString():e.toLocaleString())}}))),i.a.createElement(lt.a,{open:null!==T,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){D(null)}},i.a.createElement(ut,{severity:"info"},T)))}var cn=Object(u.a)((function(e){return{chartAvatars:{display:"flex","& > *":{margin:e.spacing(1)}},root:{margin:e.spacing(1)}}}));function ln(e){var t=Object(m.c)(),n=cn(),a=Object(r.useState)(""),c=Object(ee.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(!1),d=Object(ee.a)(u,2),s=d[0],g=d[1],h=Object(r.useState)(null),v=Object(ee.a)(h,2),p=v[0],b=v[1],O=Object(r.useState)([]),y=Object(ee.a)(O,2),j=y[0],A=y[1],x=Object(r.useState)([]),S=Object(ee.a)(x,2),I=S[0],k=S[1],w=Object(r.useState)(null),C=Object(ee.a)(w,2),T=C[0],D=C[1],L=e.selectedChart.properties,N=L.axes.map((function(e){return null===e||void 0===e?void 0:e.field})),R=Object(Ee.a)(new Set(L.features.map((function(e){return e.field}))));N=N.concat(R),N=Object(Ee.a)(new Set(N));function M(t,n,a,r){var i=null;if(n.length>0){for(var c,l=[],u=0;u<n.length;u++)for(var d=0;d<r.length;d++)n[u].values[0]===r[d]._vgsid_&&l.push(r[d]);var s,f=[];A(l),l.forEach((function(e){var t,n,a,r;(s=null===L||void 0===L?void 0:L.axes.filter((function(e){return["ordinal","band","point"].includes(e.type)}))[0],e.hasOwnProperty("properties"))?(s=null===L||void 0===L?void 0:L.features.filter((function(e){return"Feature"!=(null===e||void 0===e?void 0:e.value)}))[0],e.properties[null===(n=s)||void 0===n?void 0:n.field]?f.push(e.properties[null===(a=s)||void 0===a?void 0:a.field]):f.push(e[null===(r=s)||void 0===r?void 0:r.field])):f.push(e[null===(t=s)||void 0===t?void 0:t.field])}));var g={field:null===(c=s)||void 0===c?void 0:c.field};o(g.field);var h={text:t.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id};i=Zt(h,{feature:g,values:f},{})}if(a.length>0){var m,v,p,b,E,O,y,j,x,S,I,k,w=[],C=[];if(2===a[0].fields.length&&"R"===a[0].fields[0].type&&"R"===a[0].fields[1].type)w.push(a[0].fields[0].field),w.push(a[0].fields[1].field),C.push.apply(C,Object(Ee.a)(a[0].values[0]).concat(Object(Ee.a)(a[0].values[1]))),m=[],o(a[0].fields[0].field);else"E"===(null===(p=a[0])||void 0===p?void 0:null===(b=p.fields[0])||void 0===b?void 0:b.type)&&"R"===(null===(E=a[0])||void 0===E?void 0:null===(O=E.fields[1])||void 0===O?void 0:O.type)&&(v=a[0].fields[0].field,m=a[0].values[0]),"R"===(null===(y=a[0])||void 0===y?void 0:null===(j=y.fields[0])||void 0===j?void 0:j.type)&&"E"===(null===(x=a[0])||void 0===x?void 0:null===(S=x.fields[1])||void 0===S?void 0:S.type)&&(v=a[0].fields[1].field,m=a[0].values[1]),1===a[0].fields.length&&"R"===(null===(I=a[0])||void 0===I?void 0:null===(k=I.fields[0])||void 0===k?void 0:k.type)&&(v=a[0].fields[0].field,m=[],w.push(v),C.push.apply(C,Object(Ee.a)(a[0].values[0]))),o(v);var T={text:t.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id};i=Zt(T,{feature:{field:v},values:m},{rangeField:w,range:C})}return i}function F(e){var t=I.filter((function(t){return t.id!==e}));k(t)}function _(e,t){var n=Object(Ee.a)(I);n.find((function(t){return t.id===e})).props=t,k(n)}return Object(r.useEffect)((function(){if(e.selectedMarks.length>0){g(!0);var t=M(e.textSelection,e.selectedMarks,e.brush,e.viewData);b(t)}if(e.brush.length>0){g(!0);var n=M(e.textSelection,e.selectedMarks,e.brush,e.viewData);b(n)}}),[e.selectedMarks,e.brush]),i.a.createElement(i.a.Fragment,null,"filter"===e.mode&&i.a.createElement(f.a,{variant:"contained",size:"small",onMouseDown:function(){k([].concat(Object(Ee.a)(I),[{id:E("filter-"),props:{}}]))}},"+Add Selection"),i.a.createElement(K.a,{container:!0,spacing:3},i.a.createElement(K.a,{item:!0,xs:12},i.a.createElement("div",null,I.length>0&&I.map((function(t){return i.a.createElement(rn,{key:t.id,chartProperties:L,viewData:e.viewData,id:t.id,onDelete:F,onFilterUpdate:_})}))))),I.length>0&&i.a.createElement(f.a,{variant:"contained",size:"small",onMouseDown:function(){var n={text:e.textSelection.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id},a={},r=[],i=[];I.forEach((function(e){e.props.features&&(a={feature:{field:e.props.field},values:e.props.features.map((function(e){return e.value}))}),e.props.intervalValues&&(r.push(e.props.field),i.push.apply(i,Object(Ee.a)(e.props.intervalValues)))}));var c=Zt(n,a,{rangeField:r,range:i}),l=Je(e.currentDoc.id,[c]);t(U(l.links[0].id)),t(H(null)),t(V(!0)),t(l),D("Link created successfully!")}},"Save"),(e.textSelection&&s||e.showSelectedLinkSetting)&&"brush"===e.mode&&i.a.createElement("div",{className:n.root},0===e.brush.length&&i.a.createElement(Yt.a,{className:n.formControl},i.a.createElement(Xt.a,{htmlFor:"age-native-simple"},"Axis"),i.a.createElement(De.a,{native:!0,value:l,onChange:function(e){var t=e.target.value;o(t),p.data=j.map((function(e){return e[t]})),b(p)}},N.map((function(e){return i.a.createElement("option",{key:E(e),value:e},e)}))),i.a.createElement(Qt.a,null,"Choose which field to link to!")),i.a.createElement("div",null,i.a.createElement(Nt.a,{size:"small",variant:"contained","aria-label":"small button group"},i.a.createElement(f.a,{onMouseDown:function(n){if(n.preventDefault(),n.stopPropagation(),null!==p){p.feature={field:l};var a=Je(e.currentDoc.id,[p]);t(a),t(U(a.links[0].id))}else t(U(null));t(H(null)),t(V(!0)),D("Link created successfully!")}},"Save"),i.a.createElement(f.a,{onMouseDown:function(e){t(V(!0)),e.preventDefault(),e.stopPropagation(),t(H(null))}},"Cancel")))),i.a.createElement(lt.a,{open:null!==T,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:5e3,onClose:function(){D(null)}},i.a.createElement(ut,{severity:"success"},T)))}var on=Object(u.a)((function(e){return{root:{width:300}}}));function un(e){var t=Object(m.c)(),n=on(),a=Object(m.d)((function(e){return e.ui.showLinkSettingFor})),c=Object(r.useState)([20,37]),l=Object(ee.a)(c,2),o=l[0],u=(l[1],Object(r.useState)([{value:1900,label:1900},{value:2e3,label:2e3}])),d=Object(ee.a)(u,2),s=d[0],g=(d[1],Object(r.useState)("")),v=Object(ee.a)(g,2),p=v[0],b=v[1],O=Object(r.useState)(null),y=Object(ee.a)(O,2),j=(y[0],y[1],Object(r.useState)(!1)),A=Object(ee.a)(j,2),x=A[0],S=A[1],I=Object(r.useState)("Hello"),k=Object(ee.a)(I,2),w=k[0],C=k[1],T=e.selectedChart.properties,D=T.axes.map((function(e){return null===e||void 0===e?void 0:e.field})),L=Object(Ee.a)(new Set(T.features.map((function(e){return e.field}))));D=D.concat(L),D=Object(Ee.a)(new Set(D));return Object(r.useEffect)((function(){var t,n,a,r;b(null===(t=e.showLinkSettingFor)||void 0===t?void 0:null===(n=t.feature)||void 0===n?void 0:n.field),["ordinal","band","point","string"].includes(null===(a=e.showLinkSettingFor)||void 0===a?void 0:null===(r=a.feature)||void 0===r?void 0:r.type)?(console.log("Link props updated.....",e.showLinkSettingFor.data),C(e.showLinkSettingFor.data)):S(!0)}),[e.showLinkSettingFor]),i.a.createElement(i.a.Fragment,null,e.showLinkSettingFor&&i.a.createElement("div",{className:n.root},i.a.createElement(Yt.a,{className:n.formControl},i.a.createElement(Xt.a,{htmlFor:"age-native-simple"},"Link Field"),i.a.createElement(De.a,{native:!0,value:p,onChange:function(e){}},D.map((function(e){return i.a.createElement("option",{key:E(e),value:e},e)}))),i.a.createElement(Qt.a,null,"Some important helper text")),i.a.createElement(Yt.a,{fullWidth:!0,className:n.margin},i.a.createElement(h.a,{id:"standard-multiline-flexible",label:"Link Data",multiline:!0,rowsMax:4,value:w,onChange:function(e){C(e.target.value),console.log(w)}})),x&&i.a.createElement("div",null,i.a.createElement(N.a,{id:"range-slider",gutterBottom:!0},"Interval range"),i.a.createElement(Te.a,{value:o,onChange:function(e,t){},valueLabelDisplay:"auto","aria-labelledby":"range-slider",marks:s,min:s[0].value,max:s[1].value})," "),i.a.createElement(P.a,{elevation:1},i.a.createElement(Nt.a,{size:"small",variant:"text",fullWidth:!0,"aria-label":"small button group"},i.a.createElement(f.a,{onMouseDown:function(e){console.log("link to update",a,w.toString().split("\n"));var n=w.toString().split("\n"),r={type:"UPDATE_LINK",linkId:a.id,attrs:{data:n}};t(r),t(J(null))}},"Update"),i.a.createElement(f.a,{onMouseDown:function(e){}},"Cancel")))))}var dn=n(167),sn=n.n(dn),fn=Object(u.a)((function(e){return{hidden:{display:"none"}}}));function gn(e){var t=fn(),n=Object(r.useState)(null),a=Object(ee.a)(n,2),c=(a[0],a[1]),l=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useState)(1),d=Object(ee.a)(u,2),s=(d[0],d[1]),f=Object(te.f)().docId,g=Object(m.d)((function(e){return e.docs[f]})),h=Object(r.useState)([]),v=Object(ee.a)(h,2),p=v[0],b=v[1],E=Object(r.useState)([]),O=Object(ee.a)(E,2),y=O[0],j=O[1],A=Object(r.useState)([]),x=Object(ee.a)(A,2),S=x[0],I=x[1],k=Object(r.useState)(!1),w=Object(ee.a)(k,2),C=w[0],T=w[1],D=Object(m.d)((function(e){return e.ui.selectedLink})),L=e.chart,N=Object(r.useMemo)((function(){return je(L.highlight,JSON.parse(JSON.stringify(L.liteSpec)),!0)}),[L.spec,L.highlight]);Object(r.useEffect)((function(){(function(){var e=Object(pe.a)(ve.a.mark((function e(){var t,n,a,r,i,l,u;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Se.a)(N),e.next=3,new Ie.a(t).runAsync();case 3:return n=e.sent,e.next=6,n.toCanvas();case 6:return a=e.sent,r=a.height/a.width,s(r),e.next=11,Object(Ae.a)(null===o||void 0===o?void 0:o.current,N,{actions:!1});case 11:i=e.sent,l=i.view,u=L.liteSpec.data.hasOwnProperty("url")?l.data("source_0"):l.data("data_0"),j(u);try{l.addDataListener("paintbrush_store",(function(e,t){b(p.concat(t))})),l.addDataListener("brush_store",(function(e,t){I(S.concat(t))}))}catch(d){}c(l);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[N]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:l,style:{position:"relative",width:"fit-content"}},i.a.createElement("div",null,"filter"!==e.mode&&i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Ne.a,{onMouseDown:function(){T(!C)},"aria-label":"settings"},i.a.createElement(Me.a,null)),i.a.createElement(tn.a,{placement:"right-start",title:"Use brushing to select visual marks on the chart! Hold down the SHIFT key to select multiple marks!"},i.a.createElement(Ne.a,{style:{marginTop:"0px"},"aria-label":"help"},i.a.createElement(sn.a,null))))),i.a.createElement("div",{className:"filter"===e.mode?t.hidden:"",ref:o}),C&&i.a.createElement(Le,{chart:L}),e.textSelection&&i.a.createElement(ln,{currentDoc:g,selectedChart:L,textSelection:e.textSelection,selectedMarks:p,brush:S,viewData:y,mode:e.mode}),e.showLinkSettingFor&&i.a.createElement(un,{currentDoc:g,selectedChart:L,selectedMarks:p,brush:S,viewData:y,showLinkSettingFor:e.showLinkSettingFor,selectedLink:D})))}var hn=n(1014),mn=n(1024),vn=n(492),pn=n.n(vn),bn=n(491),En=n.n(bn),On=Object(u.a)((function(e){return{chartAvatars:{display:"flex","& > *":{margin:e.spacing(1)}},root:{width:300},toggleBtn:{margin:e.spacing(1)},largeAvatar:{width:e.spacing(7),height:e.spacing(7)},largeAvatarActive:{width:e.spacing(7),height:e.spacing(7),border:"1px solid #5e5d5d"}}}));function yn(){var e=On(),t=Object(te.f)().docId,n=Object(m.d)((function(e){return I(e,t)})),a=Object(m.d)((function(e){return e.ui.textSelection})),c=Object(m.d)((function(e){return e.ui.showLinkSettingFor})),l=Object(r.useState)(null),o=Object(ee.a)(l,2),u=o[0],d=o[1],s=Object(r.useState)("brush"),f=Object(ee.a)(s,2),g=f[0],h=f[1],v=!1;return a&&(v=!0),Object(r.useEffect)((function(){d(n.filter((function(e){return e.id===(null===c||void 0===c?void 0:c.chartId)})).pop())}),[c]),i.a.createElement(i.a.Fragment,null,v&&i.a.createElement("div",{className:e.root},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(N.a,{variant:"overline",display:"block",gutterBottom:!0},"Link Setting"),i.a.createElement(tn.a,{placement:"right-start",title:"Click on any chart to begin creating references!"},i.a.createElement(Ne.a,{style:{marginTop:"-8px"},size:"small","aria-label":"help"},i.a.createElement(sn.a,null)))),i.a.createElement("div",{className:e.chartAvatars},n.map((function(t){return i.a.createElement(dt.a,{key:t.id,src:t.thumbnail,variant:"rounded",className:t.id===(null===u||void 0===u?void 0:u.id)?e.largeAvatarActive:e.largeAvatar,onClick:function(){return function(e){d(u!=e?e:null)}(t)}})}))),u&&i.a.createElement(mn.a,{className:e.toggleBtn,value:g,exclusive:!0,onChange:function(e,t){null!==t&&h(t)},"aria-label":"text alignment",size:"small"},i.a.createElement(hn.a,{value:"brush","aria-label":"left aligned"},i.a.createElement(En.a,null)),i.a.createElement(hn.a,{value:"filter","aria-label":"centered"},i.a.createElement(pn.a,null))),u&&i.a.createElement(gn,{mode:g,textSelection:a,chart:u})),c&&i.a.createElement("div",{className:e.root},i.a.createElement(N.a,{variant:"overline",display:"block",gutterBottom:!0},"Link Setting"),i.a.createElement("div",{className:e.chartAvatars},n.map((function(t){return i.a.createElement(dt.a,{key:t.id,src:t.thumbnail,variant:"rounded",className:t.id===(null===c||void 0===c?void 0:c.chartId)?e.largeAvatarActive:e.largeAvatar})}))),u&&i.a.createElement(gn,{textSelection:a,chart:u,showLinkSettingFor:c})))}function jn(e){var t=Object(m.c)();return Object(r.useEffect)((function(){t(G(!1))}),[]),i.a.createElement(K.a,{container:!0,spacing:2},i.a.createElement(K.a,{item:!0,xs:2},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(N.a,{variant:"overline",display:"block",gutterBottom:!0},"Chart Gallery"),i.a.createElement(tn.a,{placement:"right-start",title:"Drop VegaLite specifications to add charts!"},i.a.createElement(Ne.a,{style:{marginTop:"-8px"},size:"small","aria-label":"help"},i.a.createElement(sn.a,null)))),i.a.createElement(bt,null)),i.a.createElement(K.a,{item:!0,xs:8},i.a.createElement(Jt,null)),i.a.createElement(K.a,{item:!0,xs:2},i.a.createElement(yn,null)))}var An=n(1015);var xn=function(){return i.a.createElement(o.a,null,i.a.createElement(D,null),i.a.createElement(An.a,{maxWidth:"lg",mt:2},i.a.createElement(te.c,null,i.a.createElement(te.a,{path:"/docs/:docId/view"},i.a.createElement(nt,null)),i.a.createElement(te.a,{path:"/docs/:docId"},i.a.createElement(jn,null)),i.a.createElement(te.a,{path:"/docs"},i.a.createElement($,null)),i.a.createElement(te.a,{path:"/"},i.a.createElement(_,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Sn=n(493),In=n(494),kn=n.n(In),wn=n(145),Cn=Object(wn.c)({docs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_DOC":case"UPDATE_DOC":return Object(a.a)({},e,Object(v.a)({},t.docId,Object(a.a)({},e[t.docId]||{},{},t.attrs)));case"DELETE_DOC":var n=Object(a.a)({},e);return delete n[t.docId],n;case"CREATE_CHART":return Object(a.a)({},e,Object(v.a)({},t.attrs.docId,Object(a.a)({},e[t.attrs.docId],{charts:e[t.attrs.docId].charts.concat(t.chartId)})));case"DELETE_CHART":return Object(a.a)({},e,Object(v.a)({},t.attrs.docId,Object(a.a)({},e[t.attrs.docId],{charts:e[t.attrs.docId].charts.filter((function(e){return e!==t.chartId}))})));case"UPDATE_CHARTS_IN_EDITOR":return Object(a.a)({},e,Object(v.a)({},t.docId,Object(a.a)({},e[t.docId],{chartsInEditor:t.charts})));case"UPDATE_EDITOR_STATE":return Object(a.a)({},e,Object(v.a)({},t.docId,Object(a.a)({},e[t.docId],{editorRawState:t.editorRawState})));default:return e}},charts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":case"UPDATE_CHART":return Object(a.a)({},e,Object(v.a)({},t.chartId,Object(a.a)({},e[t.chartId]||{},{},t.attrs)));case"DELETE_CHART":var n=Object(a.a)({},e);return delete n[t.chartId],n;default:return e}},links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_LINK":case"UPDATE_LINK":return Object(a.a)({},e,Object(v.a)({},t.linkId,Object(a.a)({},e[t.linkId]||{},{},t.attrs)));case"CREATE_LINKS":return t.links.reduce((function(e,t){return Object(a.a)({},e,Object(v.a)({},t.id,t))}),e);case"DELETE_LINK":var n=Object(a.a)({},e);return delete n[t.linkId],n;case"ACTIVATE_LINK":return Object(a.a)({},e,Object(v.a)({},t.linkId,Object(a.a)({},e[t.linkId],{active:!0})));case"DEACTIVATE_LINK":return Object(a.a)({},e,Object(v.a)({},t.linkId,Object(a.a)({},e[t.linkId],{active:!1})));case"CONFIRM_LINK":return Object(a.a)({},e,Object(v.a)({},t.linkId,Object(a.a)({},e[t.linkId],{isConfirmed:!0})));default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_LINK":return Object(a.a)({},e,{selectedLink:t.link});case"SET_TEXT_SELECTION":return Object(a.a)({},e,{textSelection:t.textSelection});case"SET_MANUAL_LINK_ID":return Object(a.a)({},e,{manualLinkId:t.linkId});case"EXIT_MANUAL_LINK_MODE":return Object(a.a)({},e,{exitManualLink:t.exit});case"SET_CURRENT_DOC_ID":return Object(a.a)({},e,{currentDocId:t.docId});case"SET_VIEW_MODE":return Object(a.a)({},e,{viewMode:t.val});case"LINK_ACTIVE_NO_AUTO_TRIGGER":return Object(a.a)({},e,{linkActiveNoAutoTrigger:t.val});case"SHOW_LINK_SETTING_FOR":return Object(a.a)({},e,{showLinkSettingFor:t.val});default:return e}}}),Tn=n(328),Dn=n.n(Tn),Ln=n(495),Nn=n(1016),Rn=Object(Ln.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#e91e63"},info:{main:"#1976d2"},error:{main:"#f44336"},warning:{main:"#ff9800"},success:{main:"#4caf50"}},secondary:{main:"#e91e63"},info:{main:"#1976d2"},error:{main:"#f44336"},warning:{main:"#ff9800"},success:{main:"#4caf50"},textSecondary:{main:"#bdbdbd"}});new Promise((function(e,t){Dn.a.getItem("state").then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){var t=[kn.a,Object(Sn.createLogger)()],n=Object(wn.d)(Cn,e||{},wn.a.apply(void 0,t));n.subscribe(xe((function(){var e=Object(a.a)({},n.getState());delete e.ui,Dn.a.setItem("state",e)}),1e3)),l.a.render(i.a.createElement(m.a,{store:n},i.a.createElement(Nn.a,{theme:Rn},i.a.createElement(xn,null))),document.getElementById("root"))})).catch((function(e){console.log(e),l.a.render(i.a.createElement("div",null,"Failed to initialize data!"),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[521,1,2]]]);
//# sourceMappingURL=main.ec943678.chunk.js.map