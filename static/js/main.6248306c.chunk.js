(this.webpackJsonpvte=this.webpackJsonpvte||[]).push([[0],{155:function(e,t,n){e.exports={panel:"ChartConfigPanel_panel__1OEWt",picker:"ChartConfigPanel_picker__2cC4T",color:"ChartConfigPanel_color__2Pmzu"}},302:function(e,t,n){e.exports={link:"Link_link__jXHvo",potentialLink:"Link_potentialLink__3JiCy"}},303:function(e,t,n){e.exports={container:"ChartGallery_container__pQIvT",draggingArea:"ChartGallery_draggingArea__Wft5P"}},439:function(e){e.exports=JSON.parse('{"$schema":"https://vega.github.io/schema/vega/v5.json","description":"A simple bar chart with embedded data.","background":"white","padding":5,"width":300,"height":200,"style":"cell","data":[{"name":"source_0","values":[{"category":"Apple","amount":28},{"category":"Amazon","amount":55},{"category":"Facebook","amount":43},{"category":"Netflix","amount":91},{"category":"Microsoft","amount":81},{"category":"Samsung","amount":53},{"category":"Twitter","amount":19},{"category":"Linkedin","amount":87}]},{"name":"data_0","source":"source_0","transform":[{"type":"filter","expr":"isValid(datum[\\"amount\\"]) && isFinite(+datum[\\"amount\\"])"}]}],"marks":[{"name":"marks","type":"rect","style":["bar"],"from":{"data":"data_0"},"encode":{"update":{"fill":{"value":"#4c78a8"},"x":{"scale":"x","field":"category"},"width":{"scale":"x","band":1},"y":{"scale":"y","field":"amount"},"y2":{"scale":"y","value":0}}}}],"scales":[{"name":"x","type":"band","domain":{"data":"data_0","field":"category","sort":true},"range":[0,{"signal":"width"}],"paddingInner":0.1,"paddingOuter":0.05},{"name":"y","type":"linear","domain":{"data":"data_0","field":"amount"},"range":[{"signal":"height"},0],"nice":true,"zero":true}],"axes":[{"scale":"y","orient":"left","gridScale":"x","grid":true,"tickCount":{"signal":"ceil(height/40)"},"domain":false,"labels":false,"maxExtent":0,"minExtent":0,"ticks":false,"zindex":0},{"scale":"x","orient":"bottom","grid":false,"title":"category","labelAngle":90,"labelAlign":"left","labelBaseline":"middle","labelOverlap":true,"zindex":0},{"scale":"y","orient":"left","grid":false,"title":"amount","labelOverlap":true,"tickCount":{"signal":"ceil(height/40)"},"zindex":0}]}')},440:function(e){e.exports=JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":300,"height":200,"data":{"values":[{"category":"Apple","amount":28},{"category":"Amazon","amount":55},{"category":"Facebook","amount":43},{"category":"Netflix","amount":91},{"category":"Microsoft","amount":81},{"category":"Samsung","amount":53},{"category":"Twitter","amount":19},{"category":"Linkedin","amount":87}]},"mark":"bar","encoding":{"x":{"field":"category","type":"ordinal","axis":{"labelAngle":90}},"y":{"field":"amount","type":"quantitative"}}}')},442:function(e,t,n){e.exports={viewer:"Viewer_viewer__2m97m"}},450:function(e,t,n){e.exports={panel:"ManualLinkControls_panel__Ke1GF",message:"ManualLinkControls_message__3Av28",potentialLinkControls:"ManualLinkControls_potentialLinkControls__3YAy9"}},452:function(e,t,n){e.exports={textSelection:"HighlightTextSelection_textSelection__2uV3y"}},453:function(e,t,n){e.exports={container:"Chart_container__-PcK5"}},454:function(e,t,n){e.exports={editor:"Editor_editor__2c4G6"}},455:function(e,t,n){e.exports={suggestionPanel:"SuggestionPanel_suggestionPanel__2eTnI"}},457:function(e,t,n){e.exports={potentialLinkControls:"PotentialLinkControls_potentialLinkControls__7i3RY"}},488:function(e,t,n){e.exports=n(890)},493:function(e,t,n){},695:function(e,t){},697:function(e,t){},727:function(e,t){},728:function(e,t){},773:function(e,t){},775:function(e,t){},798:function(e,t){},890:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(1),i=n.n(r),c=n(31),o=n.n(c),l=(n(493),n(60)),u=n(942),d=n(944),s=n(946),f=n(893),g=n(947),h=n(969),m=n(18),p=n(5),b=n(462),v=Object(b.a)("1234567890abcdefghijklmnopqrstuvwxyz",10),y=function(e){return e?e+v():v()},E=n(439),O=n(440),A=n(184),j=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=y("chart-");return{type:"CREATE_CHART",chartId:i,attrs:r=Object(a.a)({docId:e,spec:t,liteSpec:n,timestamp:Date.now(),highlight:{channel:"opacity",active:1,inactive:.1}},r,{id:i})}},x=function(e,t){return{type:"UPDATE_CHART",chartId:e,attrs:t}},I=Object(A.a)((function(e){return e.docs}),(function(e){return e.charts}),(function(e,t){return t}),(function(e,t,n){return e[n].charts.map((function(e){return t[e]}))})),k=Object(A.a)((function(e){return e.docs}),(function(e){return e.charts}),(function(e,t){return t}),(function(e,t,n){return e[n].chartsInEditor.map((function(e){return t[e]}))})),S={testchart:{id:"testchart",docId:"testdoc",timestamp:Date.now(),thumbnail:"data:image/png;base64,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",highlight:{channel:"opacity",active:1,inactive:.1},properties:{axes:[{name:"x",field:"category",data:"data_0",type:"ordinal",title:"category"},{name:"y",field:"amount",data:"data_0",type:"linear",title:"amount"}],features:[{value:"Apple",type:"string",field:"category",data:"data_0"},{value:"Amazon",type:"string",field:"category",data:"data_0"},{value:"Facebook",type:"string",field:"category",data:"data_0"},{value:"Netflix",type:"string",field:"category",data:"data_0"},{value:"Microsoft",type:"string",field:"category",data:"data_0"},{value:"Samsung",type:"string",field:"category",data:"data_0"},{value:"Twitter",type:"string",field:"category",data:"data_0"},{value:"Linkedin",type:"string",field:"category",data:"data_0"}]},spec:E,liteSpec:O}},C=function(e,t){return{type:"UPDATE_DOC",docId:e,attrs:t}},T={testdoc:{id:"testdoc",title:"Testing...",timestamp:Date.now(),charts:["testchart"],chartsInEditor:[],searchedSentences:[],editorRawState:{blocks:[{key:"8i090",text:"Welcome to Vis-Text Editor",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:26,style:"BOLD"}],entityRanges:[],data:{}},{key:"42ncd",text:"Here you can compose interactive articles",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:42,style:"UNDERLINE"}],entityRanges:[],data:{}},{key:"327r6",text:"Start dragging the chart from Chart Gallery to the editor and start creating! ;)",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:81,style:"ITALIC"}],entityRanges:[],data:{}}],entityMap:{}}}},w=Object(u.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(3)},title:{flexGrow:1}}})),D=function(){var e=w(),t=Object(m.c)(),n=Object(m.d)((function(e){return e.ui.currentDocId})),a=Object(m.d)((function(e){return e.docs[n]}));return i.a.createElement(d.a,{className:e.root,position:"static",color:"inherit"},i.a.createElement(s.a,{variant:"dense"},i.a.createElement(g.a,{variant:"h6",className:e.title,underline:"none",color:"inherit",component:l.b,to:"/"},"KORI"),n&&i.a.createElement(h.a,{value:a.title,onChange:function(e){t(C(n,{title:e.target.value}))},size:"small",fullWidth:!0,margin:"dense",variant:"filled",style:{marginLeft:"100px",marginRight:"20px"},label:"Document Title"}),i.a.createElement(f.a,{color:"inherit",component:l.b,to:"/docs"},"Docs"),n&&i.a.createElement(r.Fragment,null,i.a.createElement("span",{style:{marginLeft:"10px",marginRight:"10px"}}," | "),i.a.createElement(f.a,{color:"inherit",component:l.b,to:"/docs/".concat(n)},"Edit"),i.a.createElement(f.a,{color:"inherit",component:l.b,to:"/docs/".concat(n,"/view")},"View"))))},L=n(952),N=n(188),M=n(966),R=n(441),K=n.n(R),_=n(951);var P=function(){return i.a.createElement(_.a,{container:!0,spacing:3,justify:"center"},i.a.createElement(_.a,{item:!0,xs:6},i.a.createElement(N.a,{variant:"h2",gutterBottom:!0},"KORI"),i.a.createElement(M.a,{marginBottom:2},i.a.createElement(N.a,{variant:"body1",gutterBottom:!0},"Abstract")),i.a.createElement(L.a,{variant:"extended",color:"primary","aria-label":"add",component:l.b,to:"/docs"},i.a.createElement(K.a,null),"Get Started")),i.a.createElement(_.a,{item:!0,xs:6},i.a.createElement(N.a,{variant:"overline",display:"block",gutterBottom:!0},"Teaser Image/Video")))},B=n(892),W=n(291),H=n.n(W),z=function(e){return{type:"SET_SELECTED_LINK",link:e}},F=function(e){return{type:"SET_TEXT_SELECTION",textSelection:e}},U=function(e){return{type:"SET_MANUAL_LINK_ID",linkId:e}},G=function(e){return{type:"EXIT_MANUAL_LINK_MODE",exit:e}},X=function(e){return{type:"SET_VIEW_MODE",val:e}},Z=function(e){return{type:"LINK_ACTIVE_NO_AUTO_TRIGGER",val:e}},V={},J=Object(u.a)((function(e){return{button:{width:"100%",padding:e.spacing(1),margin:e.spacing(1)},paper:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary,height:e.spacing(16),width:"100%"}}}));var Y=function(e){var t=J(),n=Object(m.c)();return i.a.createElement(f.a,{className:t.button,component:l.b,to:"/docs/".concat(e.docId),onClick:function(){n({type:"SET_CURRENT_DOC_ID",docId:e.docId})}},i.a.createElement(B.a,{className:t.paper,elevation:2},e.doc.title,i.a.createElement("div",null)))},Q=Object(u.a)((function(e){return{button:{width:"100%",padding:e.spacing(1),margin:e.spacing(1)},paper:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary,height:e.spacing(16),width:"100%"}}}));var q=function(){var e=Q(),t=Object(m.c)(),n=Object(m.d)((function(e){return Object.values(e.docs)}));return i.a.createElement(_.a,{container:!0,spacing:1},i.a.createElement(_.a,{item:!0,xs:2},i.a.createElement(f.a,{className:e.button,onClick:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y();return{type:"CREATE_DOC",docId:t,attrs:e=Object(a.a)({title:"Untitled",editorRawState:null,timestamp:Date.now(),searchedSentences:[],charts:[],chartsInEditor:[]},e,{id:t})}}();t(e)}},i.a.createElement(B.a,{className:e.paper,variant:"outlined"},i.a.createElement(H.a,null)))),n.map((function(e){return i.a.createElement(_.a,{key:e.id,item:!0,xs:2},i.a.createElement(Y,{doc:e,docId:e.id}))})))},$=n(12),ee=n(49),te=n(19),ne=n(149),ae=n.n(ne),re=n(442),ie=n.n(re),ce=n(296),oe=n.n(ce),le=n(443),ue=n.n(le),de=n(444),se=n.n(de),fe=n(445),ge=n.n(fe),he=(n(635),n(636),n(637),n(13)),me=n.n(he),pe=n(34),be=n(9),ve=n(6),ye=n(0),Ee=n(235),Oe=function(e,t){try{!function(e){var t=["bar","area","geoshape"].includes(e.mark)||"arc"===e.mark.type?{paintbrush:{type:"multi",toggle:!0,clear:"window:keypress"}}:{brush:{type:"interval",clear:"window:keypress"},paintbrush:{type:"multi",toggle:!0,clear:"window:keypress"}};e.selection=t,e.encoding.opacity={condition:[{selection:"paintbrush",value:1}],value:.1}}(t)}catch(r){}var n=Object(Ee.compile)(t).spec;return n.data.forEach((function(e){e.url&&e.url.startsWith("data")&&(e.url="/vis-text-editor/"+e.url)})),n.signals=[].concat(Object(ve.a)(n.signals||[]),[{name:"highlight",value:{data:[],start:0,end:100,enabled:!1}}]),n.marks.forEach((function(t){!function e(t,n){if("group"===t.type)return void(t.marks&&t.marks.forEach((function(t){return e(t,n)})));var r="shape"===t.type&&t.style.includes("geoshape"),i="highlight.enabled===true && (\n        (highlight.rangeField === '' && (indexof(highlight.data, datum[highlight.field])!=-1 ".concat(r?"|| indexof(highlight.data, datum.properties[highlight.field])!=-1)":")",") ||\n        (highlight.rangeField != '' && (indexof(highlight.data, datum[highlight.field])!=-1 ").concat(r?"|| indexof(highlight.data, datum.properties[highlight.field])!=-1)":")"," && (datum[highlight.rangeField] > highlight.rangeMin && datum[highlight.rangeField]<highlight.rangeMax)) ||\n        (datum[highlight.field] > highlight.rangeMin && datum[highlight.field]<highlight.rangeMax) ||\n        (datum[highlight.fieldX] > highlight.rangeX[0] && datum[highlight.fieldX] < highlight.rangeX[1] &&\n            datum[highlight.fieldY] < highlight.rangeY[0] && datum[highlight.fieldY] > highlight.rangeY[1] ) \n    )"),c="highlight.enabled===true && !(\n        (highlight.rangeField === '' && (indexof(highlight.data, datum[highlight.field])!=-1 ".concat(r?"|| indexof(highlight.data, datum.properties[highlight.field])!=-1)":")",") ||\n        (highlight.rangeField != '' && (indexof(highlight.data, datum[highlight.field])!=-1 ").concat(r?"|| indexof(highlight.data, datum.properties[highlight.field])!=-1)":")"," && (datum[highlight.rangeField] > highlight.rangeMin && datum[highlight.rangeField]<highlight.rangeMax)) ||\n        (datum[highlight.field] > highlight.rangeMin && datum[highlight.field]<highlight.rangeMax) ||\n        (datum[highlight.fieldX] > highlight.rangeX[0] && datum[highlight.fieldX] < highlight.rangeX[1] &&\n            datum[highlight.fieldY] < highlight.rangeY[0] && datum[highlight.fieldY] > highlight.rangeY[1] )\n    )"),o=t.encode.update[n.channel],l=[{test:i,value:n.active},{test:c,value:n.inactive}];t.encode.update=Object(a.a)({},t.encode.update,Object(p.a)({},n.channel,l.concat(Object(ye.isArray)(o)?o:[])))}(t,e)})),n};var Ae=n(292),je=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];var o=Date.now();t&&o<t+a?(clearTimeout(n),n=setTimeout((function(){t=o,e.apply(void 0,i)}),a)):(t=o,e.apply(void 0,i))};return r},xe=n(114),Ie=n(115),ke=n(155),Se=n.n(ke),Ce=n(958),Te=n(975),we=n(967);function De(e){var t=Object(m.c)(),n={opacity:{active:1,inactive:.1},fill:{active:"#1f77b4",inactive:"#c7c7c7"}},c=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],o=e.chart.highlight,l=Object(r.useState)(o.active),u=Object($.a)(l,2),d=u[0],s=u[1],f=Object(r.useState)(o.inactive),g=Object($.a)(f,2),h=g[0],p=g[1];function b(n,r){s(r),t(x(e.chart.id,{highlight:Object(a.a)({},o,{active:r})}))}function v(n,r){p(r),t(x(e.chart.id,{highlight:Object(a.a)({},o,{inactive:r})}))}return i.a.createElement("div",null,i.a.createElement(M.a,{zIndex:"modal",className:Se.a.panel,top:40,left:"45%",onMouseDown:function(e){return e.stopPropagation()}},i.a.createElement(M.a,{component:B.a,p:2},i.a.createElement(_.a,{container:!0,direction:"column",spacing:2},i.a.createElement(_.a,{item:!0},i.a.createElement(N.a,{gutterBottom:!0},"Highlight Option")),i.a.createElement(_.a,{item:!0},i.a.createElement(N.a,{variant:"caption"},"Channel"),i.a.createElement(M.a,null,i.a.createElement(we.a,{value:o.channel,onChange:function(r){var i=r.target.value;if(i!==o.channel){var c=n[i];s(c.active),p(c.inactive),t(x(e.chart.id,{highlight:Object(a.a)({channel:i},n[i])}))}}},Object.keys(n).map((function(e){return i.a.createElement(Ce.a,{key:e,value:e},e)}))))),i.a.createElement(_.a,{item:!0},i.a.createElement(N.a,{variant:"caption"},"Active"),"opacity"===o.channel?i.a.createElement(Te.a,{value:d,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:1,step:.05,onChange:function(e,t){s(t)},onChangeCommitted:b}):i.a.createElement(M.a,{className:Se.a.picker},c.map((function(e){return i.a.createElement(M.a,{className:Se.a.color,bgcolor:e,border:e===d?1:0,onMouseUp:function(t){return b(0,e)}})}))),i.a.createElement(N.a,{variant:"caption"},"Inactive"),"opacity"===o.channel?i.a.createElement(Te.a,{value:h,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:1,step:.05,onChange:function(e,t){p(t)},onChangeCommitted:v}):i.a.createElement(M.a,{className:Se.a.picker},c.map((function(e){return i.a.createElement(M.a,{className:Se.a.color,bgcolor:e,border:e===h?1:0,onMouseUp:function(t){return v(0,e)}})}))))))))}var Le=n(450),Ne=n.n(Le),Me=n(959),Re=function(e,t){return{type:"CREATE_LINKS",links:t.map((function(t){return Object(a.a)({},t,{timestamp:Date.now(),docId:e,id:y("link-")})}))}},Ke=function(e){return{type:"DELETE_LINK",linkId:e}},_e=function(e){return{type:"DEACTIVATE_LINK",linkId:e}},Pe=Object(A.a)((function(e){return e.links}),(function(e,t){return t}),(function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=Object($.a)(e,2);n[0];return n[1].docId===t})))})),Be=function(e,t,n,a){var r=e.text,i=e.extent,c=e.blockKey,o=e.chartId,l=t.feature,u=t.values,d=n.fieldX,s=n.rangeX,f=n.fieldY,g=n.rangeY;return{text:r,startIndex:i[0],endIndex:i[1],blockKey:c,chartId:o,feature:l,data:u,fieldX:d,rangeX:s,fieldY:f,rangeY:g,active:!1,isConfirmed:!0,trigger:a}};function We(e){var t=Object(m.c)(),n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null,c=e.selectedChart.properties;return r&&e.textSelection?i.a.createElement(M.a,{right:0,top:0,className:Ne.a.potentialLinkControls},i.a.createElement(B.a,{elevation:1},i.a.createElement(Me.a,{size:"small",variant:"text",fullWidth:!0,"aria-label":"small button group"},i.a.createElement(f.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),function(n,r,i,o){var l=null;if(r.length>0){for(var u,d=[],s=0;s<r.length;s++)for(var f=0;f<o.length;f++)r[s].values[0]===o[f]._vgsid_&&d.push(o[f]);var g,h=[];d.forEach((function(e){var t,n,a,r;(g=null===c||void 0===c?void 0:c.axes.filter((function(e){return["ordinal","band","point"].includes(e.type)}))[0],e.hasOwnProperty("properties"))?(g=null===c||void 0===c?void 0:c.features.filter((function(e){return"Feature"!=(null===e||void 0===e?void 0:e.value)}))[0],e.properties[null===(n=g)||void 0===n?void 0:n.field]?h.push(e.properties[null===(a=g)||void 0===a?void 0:a.field]):h.push(e[null===(r=g)||void 0===r?void 0:r.field])):h.push(e[null===(t=g)||void 0===t?void 0:t.field])}));var m={field:null===(u=g)||void 0===u?void 0:u.field},p={text:n.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id};l=Be(p,{feature:m,values:h},{}),console.log("MultiPoint Link",l)}if(i.length>0){var b,v,y,E,O,A,j,x,I,k;2===i[0].fields.length&&"R"===i[0].fields[0].type&&"R"===i[0].fields[1].type?(E=i[0].fields[0].field,O=i[0].fields[1].field,A=i[0].values[0],j=i[0].values[1],y=[]):("E"===i[0].fields[0].type&&(x=i[0].fields[0].field,y=i[0].values[0]),"R"===i[0].fields[0].type&&(x=i[0].fields[0].field,y=[],I=i[0].values[0][0],k=i[0].values[0][1]));var S={text:n.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id};l=Be(S,{feature:{field:x},values:y},{fieldX:E,rangeX:A,fieldY:O,rangeY:j}),console.log("Single Axis Brush Link",l),(null===(b=i[0])||void 0===b?void 0:b.fields.length)<2&&"R"===(null===(v=i[0])||void 0===v?void 0:v.fields[0].type)&&(l=Object(a.a)({},l,{rangeField:x,rangeMin:I,rangeMax:k})),console.log("Rectangular Brush Link",l)}if(null!==l){var C=Re(e.currentDoc.id,[l]);t(C),t(U(C.links[0].id))}else t(U(null))}(e.textSelection,e.selectedMarks,e.brush,e.viewData),t(F(null)),t(G(!0))}},"Accept"),i.a.createElement(f.a,{onMouseDown:function(e){t(G(!0)),e.preventDefault(),e.stopPropagation(),t(F(null))}},"Cancel")))):""}var He=n(960),ze=n(451),Fe=n.n(ze),Ue=Object(r.memo)((function(e){var t=e.block,n=e.blockProps,c=(e.customStyleMap,e.customStyleFn,e.decorator,e.forceSelection,e.offsetKey,e.selection),o=(e.tree,e.contentState,e.blockStyleFn,e.preventScroll,e.style),l=Object(be.a)(e,["block","blockProps","customStyleMap","customStyleFn","decorator","forceSelection","offsetKey","selection","tree","contentState","blockStyleFn","preventScroll","style"]),u=(Object(m.c)(),Object(r.useState)(null)),d=Object($.a)(u,2),s=d[0],f=d[1],g=Object(r.useRef)(null),h=Object(r.useRef)(null),p=Object(r.useState)(1),b=Object($.a)(p,2),v=b[0],y=b[1],E=Object(m.d)((function(e){return e.charts[n.id]})),O=Object(m.d)((function(e){return e.ui.textSelection})),A=Object(ee.f)().docId,j=Object(m.d)((function(e){return e.docs[A]})),x=Object(m.d)((function(e){return e.docs[A].chartsInEditor})),I=Object(r.useState)([]),k=Object($.a)(I,2),S=k[0],C=k[1],T=Object(r.useState)([]),w=Object($.a)(T,2),D=w[0],L=w[1],N=Object(r.useState)([]),M=Object($.a)(N,2),R=M[0],K=M[1],_=Object(r.useState)(!1),P=Object($.a)(_,2),B=P[0],W=P[1],H=Object(m.d)((function(e){return e.ui.viewMode})),z=Object(m.d)((function(e){return Object.values(e.links).filter((function(e){return e.chartId===n.id}))}),m.b),F=Object(r.useMemo)((function(){return Oe(E.highlight,JSON.parse(JSON.stringify(E.liteSpec)))}),[E.spec,E.highlight]);function U(e,t){if(e)g.current.getBoundingClientRect().width}Object(r.useEffect)((function(){(function(){var e=Object(pe.a)(me.a.mark((function e(){var t,n,a,r,i,c,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(xe.a)(F),e.next=3,new Ie.a(t).runAsync();case 3:return n=e.sent,e.next=6,n.toCanvas();case 6:return a=e.sent,r=a.height/a.width,y(r),e.next=11,Object(Ae.a)(h.current,F,{actions:!1});case 11:i=e.sent,c=i.view,o=E.liteSpec.data.hasOwnProperty("url")?c.data("source_0"):c.data("data_0"),L(o);try{c.addDataListener("paintbrush_store",(function(e,t){console.log(e,t),C(S.concat(t))})),c.addDataListener("brush_store",(function(e,t){console.log(e,t),K(R.concat(t))}))}catch(l){}f(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[F]),Object(r.useEffect)(je(Object(pe.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(s,v);case 1:case"end":return e.stop()}}),e)}))),500)),Object(r.useEffect)((function(){s&&(z.some((function(e){return e.active}))?z.filter((function(e){return e.active})).forEach((function(e){s.signal("highlight",{type:e.type,data:e.data,field:e.feature.field,enabled:!0,rangeField:e.rangeField||"",rangeMin:e.rangeMin||0,rangeMax:e.rangeMax||0,fieldX:e.fieldX||"",fieldY:e.fieldY||"",rangeX:e.rangeX||[0,0],rangeY:e.rangeY||[0,0]}).runAsync()})):s.signal("highlight",{enabled:!1}).runAsync())}),[z]);var G=!H&&c.getAnchorKey()===t.getKey(),X=x.indexOf(E.id)>-1&&!G&&O?Object(a.a)({},o,{position:"relative",borderStyle:"solid",borderColor:"gray",width:"fit-content"}):Object(a.a)({},o,{position:"relative",width:"fit-content"});return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",Object.assign({ref:g},l,{style:X}),i.a.createElement("div",null,G&&i.a.createElement(He.a,{onMouseDown:function(){W(!B)},"aria-label":"settings"},i.a.createElement(Fe.a,null))),i.a.createElement("div",{ref:h}),G&&B&&i.a.createElement(De,{chart:E}),G&&O&&i.a.createElement(We,{currentDoc:j,selectedChart:E,textSelection:O,selectedMarks:S,brush:R,viewData:D})))})),Ge=n(70),Xe=oe()(),Ze=se()(),Ve=ue()(),Je=ge()(),Ye=Ve.AlignmentTool,Qe=Xe.Toolbar,qe=[Ze,Je,Ve,Xe,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.decorator?e.decorator(Ue):Ue;return{blockRendererFn:function(e,n){var r=n.getEditorState;if("atomic"===e.getType()){var i=r().getCurrentContent();if(!e.getEntityAt(0))return;var c=i.getEntity(e.getEntityAt(0)),o=c.getData();if("CHART"===c.getType())return{component:t,editable:!1,props:Object(a.a)({},o)}}return null},ChartBlock:Ue}}({decorator:Object(ne.composeDecorators)(Ze.decorator,Je.decorator,Ve.decorator)})];function $e(){return i.a.createElement(r.Fragment,null,i.a.createElement(Qe,null,(function(e){return i.a.createElement("div",null,i.a.createElement(Ge.BoldButton,e),i.a.createElement(Ge.ItalicButton,e),i.a.createElement(Ge.UnderlineButton,e),i.a.createElement(Ge.CodeButton,e),i.a.createElement(ce.Separator,e),i.a.createElement(Ge.HeadlineOneButton,e),i.a.createElement(Ge.HeadlineTwoButton,e),i.a.createElement(Ge.HeadlineThreeButton,e),i.a.createElement(Ge.UnorderedListButton,e),i.a.createElement(Ge.OrderedListButton,e),i.a.createElement(Ge.BlockquoteButton,e),i.a.createElement(Ge.CodeBlockButton,e))})),i.a.createElement(Ye,null))}var et=n(302),tt=n.n(et);var nt=n(452),at=n.n(nt);var rt=[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"TEXT_SELECTION"===n.getEntity(t).getType()}),t)},component:function(e){return i.a.createElement("span",{className:at.a.textSelection,"data-offset-key":e.offsetKey},e.children)}},{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)},component:function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.links})),a=tt.a.potentialLink,r=e.contentState.getEntity(e.entityKey).getData();return n[r.id]&&n[r.id].isConfirmed&&(a=tt.a.link),i.a.createElement("span",{className:a,onMouseOver:function(){t({type:"ACTIVATE_LINK",linkId:r.id}),t(Z(!0))},onMouseLeave:function(){_e(r.id),t(_e(r.id)),t(Z(!1))},onClick:function(){var n=JSON.parse(JSON.stringify(r));n.startIndex=e.start,n.endIndex=e.end,t(z(n))},"data-offset-key":e.offsetKey},e.children)}}];function it(e){Object(m.c)();var t=Object(ee.f)().docId,n=(Object(m.d)((function(e){return e.docs[t]})),Object(m.d)((function(e){return e.docs[t].editorRawState}))),c=Object(r.useRef)(null),o=null===n?te.EditorState.createEmpty().getCurrentContent():Object(te.convertFromRaw)(function(e){var t=Object(a.a)({},e.entityMap);return Object.keys(t).forEach((function(e){"LINK"===t[e].type&&(t[e].data.isConfirmed||delete t[e])})),{blocks:e.blocks,entityMap:t}}(n)),l=Object(r.useState)(te.EditorState.createWithContent(o)),u=Object($.a)(l,2),d=u[0],s=u[1],f=e.viewMode;return i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:ie.a.viewer},i.a.createElement(ae.a,{editorState:d,plugins:qe,onChange:function(e){s(e)},handleKeyCommand:function(e){var t=te.RichUtils.handleKeyCommand(d,e);return t?(s(t),"handled"):"not-handled"},decorators:rt,ref:c,readOnly:f})))}function ct(e){console.log("Viewer Mode Active!!!");var t=Object(m.c)();return Object(r.useEffect)((function(){t(X(!0))}),[]),i.a.createElement(_.a,{container:!0,spacing:2},i.a.createElement(_.a,{item:!0,xs:8},i.a.createElement(it,{viewMode:!0})))}var ot=n(303),lt=n.n(ot),ut=n(453),dt=n.n(ut),st=n(971),ft=n(968);function gt(e){return i.a.createElement(ft.a,Object.assign({elevation:6,variant:"filled"},e))}var ht=n(974);var mt=Object(r.memo)((function(e){var t=Object(m.c)(),n=(Object(r.useRef)(null),Object(m.d)((function(t){return t.docs[e.docId].chartsInEditor}))),a=(Object(r.useMemo)((function(){return JSON.parse(JSON.stringify(e.spec))}),[e.spec]),Object(r.useState)(null)),c=Object($.a)(a,2),o=c[0],l=c[1],u=Object(r.useState)(!1),d=Object($.a)(u,2),s=d[0],f=d[1];return i.a.createElement(B.a,{className:dt.a.container,onKeyDown:function(a){var r,i;"Delete"===a.key&&(n.includes(e.id)?l("Chart can not be deleted. It is active in the editor!"):t((r=e.id,i={docId:e.docId},{type:"DELETE_CHART",chartId:r,attrs:i})))},tabIndex:"0",elevation:s?2:0},i.a.createElement("div",{draggable:!0,onDragStart:function(t){console.log("props  in chart",e),t.dataTransfer.setData("chartId",e.id)},onMouseEnter:function(){f(!0)},onMouseLeave:function(){f(!1)}},i.a.createElement(ht.a,{src:e.thumbnail,variant:"rounded",style:{height:"150px",width:"150px"}})),i.a.createElement(st.a,{open:null!==o,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){l(null)}},i.a.createElement(gt,{severity:"error"},o)))})),pt=function(e){return bt.apply(this,arguments)};function bt(){return(bt=Object(pe.a)(me.a.mark((function e(t){var n,a,r,i,c,o,l,u,d,s,f,g,h,m,p,b,v,y,E,O,A,j,x,I,k,S,C,T,w;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data){e.next=2;break}return e.abrupt("return",[]);case 2:return n={},a=Object(xe.a)(t),e.next=6,new Ie.a(a).runAsync();case 6:r=e.sent,i=r.getState({data:ye.truthy,signals:ye.falsy,recurse:!0}),c=!0,o=!1,l=void 0,e.prev=11,u=t.marks[Symbol.iterator]();case 13:if(c=(d=u.next()).done){e.next=73;break}s=d.value,f=i.data[s.name].map((function(e){return e.datum})),g=!0,h=!1,m=void 0,e.prev=19,p=f[Symbol.iterator]();case 21:if(g=(b=p.next()).done){e.next=56;break}v=b.value,y="shape"===s.type&&s.style.includes("geoshape"),E=Object.entries(v),y&&(E=E.concat(Object.entries(v.properties))),O=!0,A=!1,j=void 0,e.prev=29,x=E[Symbol.iterator]();case 31:if(O=(I=x.next()).done){e.next=39;break}if(k=Object($.a)(I.value,2),S=k[0],C=k[1],Object(ye.isString)(C)){e.next=35;break}return e.abrupt("continue",36);case 35:n[C]={value:C,type:"string",field:S,data:v.name};case 36:O=!0,e.next=31;break;case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(29),A=!0,j=e.t0;case 45:e.prev=45,e.prev=46,O||null==x.return||x.return();case 48:if(e.prev=48,!A){e.next=51;break}throw j;case 51:return e.finish(48);case 52:return e.finish(45);case 53:g=!0,e.next=21;break;case 56:e.next=62;break;case 58:e.prev=58,e.t1=e.catch(19),h=!0,m=e.t1;case 62:e.prev=62,e.prev=63,g||null==p.return||p.return();case 65:if(e.prev=65,!h){e.next=68;break}throw m;case 68:return e.finish(65);case 69:return e.finish(62);case 70:c=!0,e.next=13;break;case 73:e.next=79;break;case 75:e.prev=75,e.t2=e.catch(11),o=!0,l=e.t2;case 79:e.prev=79,e.prev=80,c||null==u.return||u.return();case 82:if(e.prev=82,!o){e.next=85;break}throw l;case 85:return e.finish(82);case 86:return e.finish(79);case 87:return t.data.forEach((function(e){r.data(e.name)})),T=yt(t),t.scales.filter((function(e){return["ordinal","band","point"].includes(e.type)})).forEach((function(e){t.data.forEach((function(t){r.data(t.name).forEach((function(a){if(e.domain.field){var r=e.domain.field,i=Object(ye.isDate)(a[r])?a[r]:Object(ye.toString)(a[r]),c=Object(ye.isDate)(i)?"date":"string";n[i]={value:i,type:c,field:r,data:t.name}}else e.domain.fields&&e.domain.fields.forEach((function(e){var r=Object(ye.isString)(e)?e:e.field,i=Object(ye.isDate)(a[r])?a[r]:Object(ye.toString)(a[r]),c=Object(ye.isDate)(i)?"date":"string";n[i]={value:i,type:c,field:r,data:t.name}}))}))})),Object(ye.isArray)(e.domain)&&e.domain.forEach((function(a){a=Object(ye.isDate)(a)?a:Object(ye.toString)(a);var r=Object(ye.isDate)(a)?"date":"string",i=vt(t,e.name);n[a]={value:a,type:r,field:i,data:null}}))})),w={axes:Object.values(T),features:Object.values(n)},e.abrupt("return",w);case 92:case"end":return e.stop()}}),e,null,[[11,75,79,87],[19,58,62,70],[29,41,45,53],[46,,48,52],[63,,65,69],[80,,82,86]])})))).apply(this,arguments)}var vt=function(e,t){var n=!0,a=!1,r=void 0;try{for(var i,c=e.marks[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;if(o.encode.enter)for(var l=0,u=Object.entries(o.encode.enter);l<u.length;l++){var d=Object($.a)(u[l],2)[1];if(d.scale===t&&d.field)return d.field}if(o.encode.update)for(var s=0,f=Object.entries(o.encode.update);s<f.length;s++){var g=Object($.a)(f[s],2)[1];if(g.scale===t&&g.field)return g.field}}}catch(h){a=!0,r=h}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return null},yt=function(e){var t={};return e.scales.forEach((function(n){var a=n.name,r=Object(ye.isArray)(n.domain.fields)&&n.domain.fields[0].hasOwnProperty("field")?n.domain.fields[0].field:Object(ye.isArray)(n.domain.fields)?n.domain.fields:n.domain.field,i=n.domain.data,c=n.type,o=e.axes?e.axes.filter((function(e){return e.scale===a&&void 0!==e.title||null})):void 0,l=Object(ye.isArray)(o)&&o.length>0&&o[0].hasOwnProperty("title")?o[0].title:r||void 0,u={name:a,field:r,data:i,type:c,title:l};t[a]=u})),t},Et=function(){var e=Object(pe.a)(me.a.mark((function e(t){var n,a,r,i;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(xe.a)(t),e.next=3,new Ie.a(n).runAsync();case 3:return a=e.sent,e.next=6,a.toImageURL("png");case 6:return r=e.sent,e.next=9,Ot(r);case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ot(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){var e=250/a.height*a.width,n=document.createElement("canvas"),r=n.getContext("2d");n.width=e,n.height=250,r.drawImage(this,0,0,e,250),t(n.toDataURL())}}))}function At(e){var t=Object(m.c)(),n=Object(ee.f)().docId,a=Object(r.useState)(!1),c=Object($.a)(a,2),o=c[0],l=c[1],u=Object(r.useState)(null),d=Object($.a)(u,2),s=d[0],f=d[1],g=Object(m.d)((function(e){return I(e,n)}));return i.a.createElement("div",{className:lt.a.container,onDragEnter:function(){l(!0)},onDragLeave:function(){l(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var a=e.dataTransfer.files[0];if(a){if(a.type.match("application/json")){var r=new FileReader;r.onload=function(){var e=Object(pe.a)(me.a.mark((function e(a){var r,i,c,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(a.target.result),(i=Object(Ee.compile)(r).spec).data.forEach((function(e){e.url&&e.url.startsWith("data")&&(e.url="/vis-text-editor/"+e.url)})),e.next=6,Et(i);case 6:return c=e.sent,e.next=9,pt(i);case 9:o=e.sent,t(j(n,i,r,{properties:o,thumbnail:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f("Syntex error in specification file!");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(a)}else f("Wrong format!");l(!1)}}},i.a.createElement(st.a,{open:null!==s,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){f(null)}},i.a.createElement(gt,{severity:"error"},s)),i.a.createElement("div",{className:lt.a.draggingArea,style:{opacity:o?.5:0}},"Drop Vega-lite Spec"),g.map((function(e){return i.a.createElement(mt,{key:e.id,docId:n,id:e.id,spec:e.spec,thumbnail:e.thumbnail})})))}var jt=n(454),xt=n.n(jt),It=n(455),kt=n.n(It),St=n(950),Ct=n(901),Tt=n(963),wt=n(962),Dt=n(961),Lt=n(456),Nt=n.n(Lt);function Mt(e){var t=Object(m.c)(),n=window.getSelection(),a=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null;function r(t,n){n.preventDefault(),n.stopPropagation(),e.onSelected(t)}return a?i.a.createElement(M.a,{zIndex:"modal",left:a.x+20,top:a.y+20,className:kt.a.suggestionPanel},i.a.createElement(B.a,null,i.a.createElement(St.a,null,i.a.createElement(Ct.a,{button:!0,onMouseDown:function(){e.onCreateLinkSelect(),t(F(e.textSelection))}},i.a.createElement(Dt.a,null,i.a.createElement(Nt.a,null)),"Create Link"),e.suggestions.slice(0,5).map((function(e,t){return i.a.createElement(Ct.a,{key:t,button:!0,dense:!0,onMouseDown:r.bind(null,e)},i.a.createElement(wt.a,null,i.a.createElement(ht.a,{alt:"chart",src:e.thumbnail})),i.a.createElement(Tt.a,{primary:e.text,secondary:i.a.createElement(N.a,{component:"span",variant:"caption",color:"textSecondary"},e.chartId)}))}))))):""}var Rt=n(457),Kt=n.n(Rt);function _t(e){var t=Object(m.c)(),n=window.getSelection(),a=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null;return a&&e.selectedLink&&!e.selectedLink.isConfirmed&&!e.textSelection?i.a.createElement(M.a,{zIndex:"modal",left:a.x+10,top:a.y+10,className:Kt.a.potentialLinkControls},i.a.createElement(B.a,{elevation:1},i.a.createElement(Me.a,{size:"small",variant:"text",fullWidth:!0,"aria-label":"small button group"},i.a.createElement(f.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),t({type:"CONFIRM_LINK",linkId:e.selectedLink.id}),e.onAccept(e.selectedLink),t(z(null))}},"Accept"),i.a.createElement(f.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),e.onDiscard(e.selectedLink),t(z(null))}},"Discard")))):""}var Pt=function(e,t,n){var a;return 0===t.length?[]:(a=[]).concat.apply(a,Object(ve.a)(e.map((function(e){return e.properties.features.filter((function(e){return"string"===e.type&&e.value?e.value.toLowerCase().startsWith(t.toLowerCase()):"date"===e.type&&e.value.toString().toLowerCase().includes(t.toLowerCase())})).map((function(t){return{chartId:e.id,thumbnail:e.thumbnail,feature:t,text:t.value.toString(),startIndex:n}}))}))))},Bt=n(45),Wt=n.n(Bt),Ht=n(684),zt=function(){var e=Object(pe.a)(me.a.mark((function e(t,n,a,r){var i,c,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uri:"https://koriserver.namwkim.org/discover-links",method:"POST",headers:{Accept:"application/json","Accept-Charset":"utf-8"},json:!0,body:{text:t,sentenceOffset:n,charts:a,blockKey:r}},c=Wt.a.promisify(Ht),e.next=5,c(i);case 5:return o=e.sent,e.abrupt("return",o.body.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ft=function(e){var t=e.getCurrentContent(),n=e.getSelection(),a=n.getAnchorKey(),r=t.getBlockForKey(a),i=n.getAnchorOffset(),c=r.getText().substr(0,i),o=n.getAnchorOffset(),l=c.split(" ").slice(-1).pop();return{text:l,startIndex:o-l.length,endIndex:o}},Ut=function(e,t){return e.forEach((function(e){t=Gt(e,t)})),t},Gt=function(e,t){var n=t.getCurrentContent(),r=t.getSelection(),i=r.getAnchorKey(),c=r.getAnchorOffset(),o=e.startIndex,l=e.endIndex;o<0&&(o=0);var u=n.createEntity("LINK","MUTABLE",Object(a.a)({},e)),d=u.getLastCreatedEntityKey(),s=r.merge({anchorKey:e.blockKey,focusKey:e.blockKey,anchorOffset:o,focusOffset:l}),f=t.getSelection().merge({anchorOffset:Ft(t).startIndex});u=te.Modifier.replaceText(t.getCurrentContent(),"@"===(null===e||void 0===e?void 0:e.trigger)?f:s,e.text,t.getCurrentInlineStyle(),d);var g=l>c?l:c,h=te.EditorState.push(t,u,"insert-characters"),m=h.getSelection().merge({anchorKey:i,focusKey:i,focusOffset:g,anchorOffset:g});return h=te.EditorState.moveSelectionToEnd(h),h=te.EditorState.forceSelection(h,m)},Xt=function(e,t){if(e){var n=t.getCurrentContent(),a=te.Modifier.applyEntity(n,e,null),r=te.EditorState.push(t,a,"apply-entity"),i=Math.max(e.getAnchorOffset(),e.getFocusOffset()),c=r.getSelection().merge({focusOffset:i,anchorOffset:i});return r=te.EditorState.moveSelectionToEnd(r),r=te.EditorState.forceSelection(r,c)}},Zt=function(e){var t=e.getCurrentContent(),n=e.getSelection().getAnchorKey();return{blockText:t.getBlockForKey(n).getText(),blockKey:n}},Vt=function(e,t,n){var r=Object(a.a)({},e.entityMap);return t=t.filter((function(e){var t=!0;return Object.keys(r).forEach((function(a){"LINK"===r[a].type&&r[a].data.isConfirmed&&r[a].data.text===(null===e||void 0===e?void 0:e.text)&&n.includes(r[a].data.text)&&(t=!1)})),t}))},Jt=n(458);function Yt(e){var t=Object(m.c)(),n=Object(ee.f)().docId,c=Object(m.d)((function(e){return e.docs[n]})),o=Object(m.d)((function(e){return I(e,n)})),l=Object(m.d)((function(e){return e.docs[n].editorRawState})),u=Object(m.d)((function(e){return k(e,n)})),d=Object(m.d)((function(e){return e.ui.selectedLink})),s=Object(m.d)((function(e){return Pe(e,n)})),f=Object(m.d)((function(e){return e.ui.exitManualLink})),g=Object(m.d)((function(e){return e.ui.manualLinkId})),h=Object(m.d)((function(e){return e.ui.linkActiveNoAutoTrigger})),b=Object(m.d)((function(e){return e.ui.textSelection})),v=Object(r.useState)(b),E=Object($.a)(v,2),O=E[0],A=E[1],j=Object(r.useRef)(null),x=Object(r.useState)([]),S=Object($.a)(x,2),T=S[0],w=S[1],D=Object(m.d)((function(e){return e.docs[n].searchedSentences})),L=null===l?te.EditorState.createEmpty().getCurrentContent():Object(te.convertFromRaw)(l),N=Object(r.useState)(te.EditorState.createWithContent(L)),M=Object($.a)(N,2),R=M[0],K=M[1],_=Object(r.useState)(null),P=Object($.a)(_,2),B=P[0],W=P[1],H=Object(r.useState)(null),X=Object($.a)(H,2),Z=X[0],V=X[1],J=Object(r.useState)(null),Y=Object($.a)(J,2),Q=Y[0],q=Y[1],ne=Object(r.useState)([]),re=Object($.a)(ne,2),ie=re[0],ce=re[1],oe=Object(r.useRef)();function le(e){var t=Object(te.convertToRaw)(e.getCurrentContent()),n=e.getSelection(),a=n.getAnchorKey(),r=t.blocks.find((function(e){return e.key===a})),i=n.getAnchorOffset();return r.entityRanges.find((function(e){return i>=e.offset&&i<=e.offset+e.length}))}return Object(r.useEffect)((function(){return t(G(!1)),W(null),t(F(null)),t(U(null)),oe=setInterval((function(){var e,t;console.log("Checking for autosuggestions every:",5e3),(null===j||void 0===j?void 0:null===(e=j.current)||void 0===e?void 0:null===(t=e.props)||void 0===t?void 0:t.editorState)&&V(Zt(j.current.props.editorState))}),5e3),function(){return clearInterval(oe.current)}}),[]),Object(r.useEffect)((function(){f&&(K(Xt(B,R)),j.current.focus(),t(G(!1)),W(null),window.dispatchEvent(new KeyboardEvent("keypress",{key:"a"})))}),[f]),Object(r.useEffect)((function(){f&&void 0===s[g]&&(K(Xt(B,R)),W(null)),s[g]&&(K(Ut([s[g]],R)),t(U(null)),W(null),window.dispatchEvent(new KeyboardEvent("keypress",{key:"a"})))}),[g,f]),Object(r.useEffect)((function(){var e=Object(te.convertToRaw)(R.getCurrentContent());t(C(c.id,{editorRawState:e}))}),[R]),Object(r.useEffect)((function(){var e=Object(te.convertToRaw)(R.getCurrentContent()).entityMap,n=[];Object.keys(e).forEach((function(t){"LINK"===e[t].type&&s[e[t].data.id]&&n.push(e[t].data.id)})),Object.keys(s).forEach((function(e){n.includes(e)||t(Ke(e))}))}),[Object.keys(Object(te.convertToRaw)(R.getCurrentContent()).entityMap).length]),Object(r.useEffect)((function(){(function(){var e=Object(pe.a)(me.a.mark((function e(){var n,a,r,i,o,l,s,f,g;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===Z){e.next=32;break}if(n=Z.blockText,!h){e.next=4;break}return e.abrupt("return");case 4:if(!d){e.next=6;break}return e.abrupt("return");case 6:if(!O&&"INVALID"!=O){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Object(Jt.a)(n).sentences().json();case 10:a=e.sent,r=[],i=[],o=0;case 14:if(!(o<a.length)){e.next=29;break}if((l=a[o].text).includes(".")){e.next=18;break}return e.abrupt("continue",26);case 18:if(!(null===D||void 0===D?void 0:D.includes(l))){e.next=20;break}return e.abrupt("continue",26);case 20:return i.push(l),s={text:l,startIndex:n.indexOf(l),endIndex:n.indexOf(l)+l.length},e.next=24,zt(s.text,s.startIndex,u,Z.blockKey);case 24:f=e.sent,r=r.concat(f);case 26:o++,e.next=14;break;case 29:t(C(c.id,{searchedSentences:null===D||void 0===D?void 0:D.concat(i)})),r.length>0&&(g=Object(te.convertToRaw)(R.getCurrentContent()),(r=Vt(g,r,n)).length>0&&ce(r)),V(null);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[Z]),i.a.createElement(r.Fragment,null,i.a.createElement($e,null),i.a.createElement("div",{className:xt.a.editor,onDragOver:function(e){e.preventDefault(),e.stopPropagation(),j.current.focus()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.getData("chartId"),n=o.find((function(e){return e.id===t})),a=u.find((function(e){return e.id===t}));n&&!a&&(!function(e){var t=R.getCurrentContent(),n=(t=t.createEntity("CHART","IMMUTABLE",{id:e.id})).getLastCreatedEntityKey(),a=te.AtomicBlockUtils.insertAtomicBlock(R,n," ");K(a)}(n),e.dataTransfer.clearData())}},i.a.createElement(ae.a,Object(p.a)({editorState:R,plugins:qe,onChange:function(e){if(K(e),ie.length>0){var n=Re(c.id,ie);K(Ut(n.links,e)),t(n),ce([])}var a=Object(te.convertToRaw)(e.getCurrentContent()),r=Ft(e),i=e.getCurrentContent().getPlainText(" ").trim(),o=null===D||void 0===D?void 0:D.filter((function(e){return i.includes(e)}));if(t(C(c.id,{searchedSentences:o})),r.text.startsWith("@")){var l=Pt(u,r.text.slice(1),r.startIndex);w(l)}else w([]);var s=a.entityMap;if(Object.keys(s).length!==u.length){var g=Object.values(s).reduce((function(e,t){return"CHART"===t.type&&e.push(t.data.id),e}),[]);t(function(e,t){return{type:"UPDATE_CHARTS_IN_EDITOR",docId:e,charts:t}}(c.id,g))}var h=e.getSelection(),m=h.getAnchorOffset(),p=h.getAnchorKey();d&&p&&(p!==d.blockKey||m<d.startIndex||m>d.endIndex)&&t(z(null));var b=function(e,t,n){n=n||"\n";var a=t.getStartKey(),r=t.getEndKey(),i=e.getBlockMap(),c="",o=!1,l=i.skipUntil((function(e){return e.getKey()===a})).takeUntil((function(e){var t=o;return e.getKey()===r&&(o=!0),t}));if(l.length>1)return"INVALID";var u=l.map((function(e){var n=e.getKey(),i=e.getText(),o=0,l=i.length;return n===a&&(o=t.getStartOffset()),n===r&&(l=t.getEndOffset()),i=i.slice(o,l),c=n,i})).join(n),d=t.getStartOffset(),s=t.getEndOffset();return t.isBackward&&(s=t.getEndOffset(),d=t.getStartOffset()),t.getStartOffset()!==t.getEndOffset()?{text:u,startIndex:d,endIndex:s,blockKey:c,isBackward:t.isBackward}:null}(e.getCurrentContent(),h," ");if(A(b),b&&"INVALID"!=b){var v=Pt(u,b.text.trim(),b.startIndex);0!==v.length?w(v):w([{text:"NoLinkFound!"}])}"unstyled"!==e.getCurrentContent().getBlockForKey(p).getType()||f||!B||O||(t(G(!0)),t(F(null)))},onBlur:function(){w([])},handleKeyCommand:function(e){var t=te.RichUtils.handleKeyCommand(R,e);return t?(K(t),"handled"):"not-handled"},handlePastedText:function(e){return V({blockText:e.split("\n")[0],blockKey:Zt(R).blockKey}),"not-handled"},stripPastedStyles:!0,decorators:rt,ref:j,onTab:function(e){return e.preventDefault(),e.stopPropagation(),V(Zt(R)),"handled"}},"stripPastedStyles",!0))),T.length>=1&&u.length>0&&i.a.createElement(Mt,{suggestions:T.filter((function(e){return"NoLinkFound!"!==e.text})),textSelection:O,onSelected:function(e){var n={text:e.text,extent:[e.startIndex,e.startIndex+e.text.length],blockKey:R.getSelection().getAnchorKey(),chartId:e.chartId},r=Be(n,{feature:e.feature,values:[isNaN(Number(e.text))?e.text:Number(e.text)]},{},"@"),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=y("link-");return{type:"CREATE_LINK",linkId:r,attrs:n=Object(a.a)({docId:e,timestamp:Date.now()},t,{},n,{id:r})}}(c.id,r),o=Ut([i.attrs],R);t(i),w([]),K(o)},onCreateLinkSelect:function(){t(G(!1)),W(R.getSelection()),K(function(e,t){var n=t.getCurrentContent(),r=t.getSelection(),i=n.createEntity("TEXT_SELECTION","MUTABLE",Object(a.a)({},e)),c=e.startIndex,o=e.endIndex;e.isBackward&&(c=e.endIndex,o=e.startIndex);var l=i.getLastCreatedEntityKey(),u=r.merge({anchorOffset:c,focusOffset:o});i=te.Modifier.replaceText(t.getCurrentContent(),u,e.text,t.getCurrentInlineStyle(),l);var d=te.EditorState.push(t,i,"apply-entity"),s=d.getSelection().merge({focusOffset:e.endIndex,anchorOffset:e.endIndex});return d=te.EditorState.moveSelectionToEnd(d),d=te.EditorState.forceSelection(d,s)}(O,R)),q("Click on any chart. Use brushing or clicking to select visual marks. Multiple points can be selected holding the SHIFT key.")}}),i.a.createElement(_t,{textSelection:O,selectedLink:d,onDiscard:function(e){var n=R.getSelection(),a=te.ContentState.createFromText(""),r=le(R),i=n.merge({anchorOffset:r.offset,focusOffset:r.offset+r.length});a=te.Modifier.replaceText(R.getCurrentContent(),i,e.text,R.getCurrentInlineStyle());var c=te.EditorState.push(R,a,"apply-entity"),o=c.getSelection().merge({focusOffset:e.endIndex,anchorOffset:e.endIndex});c=te.EditorState.moveSelectionToEnd(c),c=te.EditorState.forceSelection(c,o),K(c),t(Ke(e.id))},onAccept:function(e){var t=le(R),n=JSON.parse(JSON.stringify(e));n.startIndex=t.offset,n.endIndex=t.offset+t.length,n.isConfirmed=!0,K(Ut([n],R))}}),i.a.createElement(st.a,{open:null!==Q,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){q(null)}},i.a.createElement(gt,{severity:"info"},Q)))}function Qt(e){var t=Object(m.c)();return Object(r.useEffect)((function(){t(X(!1))}),[]),i.a.createElement(_.a,{container:!0,spacing:2},i.a.createElement(_.a,{item:!0,xs:2},i.a.createElement(N.a,{variant:"overline",display:"block",gutterBottom:!0},"Chart Gallery"),i.a.createElement(At,null)),i.a.createElement(_.a,{item:!0,xs:8},i.a.createElement(Yt,null)))}var qt=n(964);var $t=function(){return i.a.createElement(l.a,null,i.a.createElement(D,null),i.a.createElement(qt.a,{maxWidth:"lg",mt:2},i.a.createElement(ee.c,null,i.a.createElement(ee.a,{path:"/docs/:docId/view"},i.a.createElement(ct,null)),i.a.createElement(ee.a,{path:"/docs/:docId"},i.a.createElement(Qt,null)),i.a.createElement(ee.a,{path:"/docs"},i.a.createElement(q,null)),i.a.createElement(ee.a,{path:"/"},i.a.createElement(P,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var en=n(459),tn=n(460),nn=n.n(tn),an=n(132),rn=Object(an.c)({docs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_DOC":case"UPDATE_DOC":return Object(a.a)({},e,Object(p.a)({},t.docId,Object(a.a)({},e[t.docId]||{},{},t.attrs)));case"DELETE_DOC":var n=Object(a.a)({},e);return delete n[t.docId],n;case"CREATE_CHART":return Object(a.a)({},e,Object(p.a)({},t.attrs.docId,Object(a.a)({},e[t.attrs.docId],{charts:e[t.attrs.docId].charts.concat(t.chartId)})));case"DELETE_CHART":return Object(a.a)({},e,Object(p.a)({},t.attrs.docId,Object(a.a)({},e[t.attrs.docId],{charts:e[t.attrs.docId].charts.filter((function(e){return e!==t.chartId}))})));case"UPDATE_CHARTS_IN_EDITOR":return Object(a.a)({},e,Object(p.a)({},t.docId,Object(a.a)({},e[t.docId],{chartsInEditor:t.charts})));case"UPDATE_EDITOR_STATE":return Object(a.a)({},e,Object(p.a)({},t.docId,Object(a.a)({},e[t.docId],{editorRawState:t.editorRawState})));default:return e}},charts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":case"UPDATE_CHART":return Object(a.a)({},e,Object(p.a)({},t.chartId,Object(a.a)({},e[t.chartId]||{},{},t.attrs)));case"DELETE_CHART":var n=Object(a.a)({},e);return delete n[t.chartId],n;default:return e}},links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_LINK":case"UPDATE_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId]||{},{},t.attrs)));case"CREATE_LINKS":return t.links.reduce((function(e,t){return Object(a.a)({},e,Object(p.a)({},t.id,t))}),e);case"DELETE_LINK":var n=Object(a.a)({},e);return delete n[t.linkId],n;case"ACTIVATE_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId],{active:!0})));case"DEACTIVATE_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId],{active:!1})));case"CONFIRM_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId],{isConfirmed:!0})));default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_LINK":return Object(a.a)({},e,{selectedLink:t.link});case"SET_TEXT_SELECTION":return Object(a.a)({},e,{textSelection:t.textSelection});case"SET_MANUAL_LINK_ID":return Object(a.a)({},e,{manualLinkId:t.linkId});case"EXIT_MANUAL_LINK_MODE":return Object(a.a)({},e,{exitManualLink:t.exit});case"SET_CURRENT_DOC_ID":return Object(a.a)({},e,{currentDocId:t.docId});case"SET_VIEW_MODE":return Object(a.a)({},e,{viewMode:t.val});case"LINK_ACTIVE_NO_AUTO_TRIGGER":return Object(a.a)({},e,{linkActiveNoAutoTrigger:t.val});default:return e}}}),cn=n(304),on=n.n(cn),ln=n(461),un=n(965),dn=Object(ln.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#e91e63"},info:{main:"#1976d2"},error:{main:"#f44336"},warning:{main:"#ff9800"},success:{main:"#4caf50"}},secondary:{main:"#e91e63"},info:{main:"#1976d2"},error:{main:"#f44336"},warning:{main:"#ff9800"},success:{main:"#4caf50"},textSecondary:{main:"#bdbdbd"}});new Promise((function(e,t){on.a.getItem("state").then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){var t=[nn.a,Object(en.createLogger)()],n=Object(an.d)(rn,e||{},an.a.apply(void 0,t));n.subscribe(je((function(){var e=Object(a.a)({},n.getState());on.a.setItem("state",e)}),1e3)),o.a.render(i.a.createElement(m.a,{store:n},i.a.createElement(un.a,{theme:dn},i.a.createElement($t,null))),document.getElementById("root"))})).catch((function(e){console.log(e),o.a.render(i.a.createElement("div",null,"Failed to initialize data!"),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[488,1,2]]]);
//# sourceMappingURL=main.6248306c.chunk.js.map